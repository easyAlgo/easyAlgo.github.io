// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE
// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE
define("easyAlgoConfiguration",[],function(){var e="functionsDescription",t="skipedFunction",n="blocNames",r="FIN_SI",i="SI_NON",s="SI_NON_SI",o="FIN_TANT_QUE",u="FIN_POUR",a="FIN_FONCTION",f="autoCloseTag",l="while",c="varTypes",h="booleanName",p="translateVarType",d={};d.functions={aleatoire:function(e,t){return e=e||0,t=t||100,Math.floor(Math.random()*t+e)},en_entier:function(e){return parseInt(e,10)},taille:function(e){var t=0;for(var n in e)t++;return t},racine_carree:Math.sqrt,puissance:Math.pow,arondi_inferieur:Math.floor,arondi_superieur:Math.ceil,arondi:Math.round,cosinus:Math.cos,sinus:Math.sin,tangente:Math.tan,exponentielle:Math.exp,arctangente:Math.atan,arcsinus:Math.asin,arccosinus:Math.acos,abs:Math.abs,logarithme:Math.log,radians:function(e){return e*Math.PI/180},degre:function(e){return e*180/Math.PI},non:function(e){return!e},to_ascii:function(e){return e.charCodeAt(0)},to_char:function(e){return String.fromCharCode(e)},rationaliser:function(e){var t=e<0?"-":"";e=Math.abs(e);var n=1e-6,r=1,i=0,s=0,o=1,u=e;do{var a=Math.floor(u),f=r;r=a*r+i,i=f,f=s,s=a*s+o,o=f,u=1/(u-a)}while(Math.abs(e-r/s)>e*n);return s==1?t+r:Math.abs(r)==Infinity||Math.abs(s)==Infinity?t+e:t+r+"/"+s+(s>100?" ("+t+e+")":"")},couper:function(e,t){return e.split(t)},joindre:function(e,t){return e.join(t||" ")},sous_chaine:function(e,t,n){return e.substring(t,n)},index:function(e,t,n){return e.indexOf(t,n)}},d[e]={aleatoire:"Permet de retourner un nombre au hasard entre un minimum et un maximum. par exemple aleatoir(0; 10) retourne un nombre entre 0 et 10.",taille:"Permet de connaitre la taille d'un tableau ou d'une chaine",en_entier:"Permet de convertir une chaine de caractére en un nombre",racine_carree:"Permet de calculer la racine carée d'un nombre",arondi_inferieur:"Permet d'arondir un nombre à l'entier inférieur le plus proche",arondi_superieur:"Permet d'arondir un nombre à l'entier superieur le plus proche",arondi:"Permet de calculer l'arondi le plus proche du nombre",puissance:"Permet de mettre un nombre à la puissance x puissance(nombre; x). Exemple : 4*4*4 = puissance(4; 3)",cosinus:"Permet de calculer le cosinus du paramètre",sinus:"Permet de calculer le sinus du paramètre",tangente:"Permet de calculer la tangente du paramètre. Le paramètre doit être en radians",exponentielle:"Permet de calculer l'exponentielle du nombre passé en paramètre",arctangente:"Permet de calculer l'arctangente du paramètre",arcsinus:"Permet de calculer l'arcsinus du paramètre",arccosinus:"Permet de calculer l'arccosinus du paramètre",abs:"Retourne la valeur absolue du paramètre",radians:"Converti le paramètre de degré en radian",degre:"Converti le paramètre de radian en degré",logarithme:"Calcul logarithme népérien du paramètre",to_ascii:"Retourne le nombre ascii associé au caractére en paramètre ",to_char:"Retourne le caractére associé au code ascii en paramètre",rationaliser:"Retourne une chaine qui représente le nombre sous forme de fraction. 0.333333333 retourne 1/3",couper:"Retourner un tableau qui est la chaine découpée en fonction d'un separateur. Exemple couper('Bonjour le monde'; ' ') = ['Bonjour';'Le';'Monde']",sous_chaine:'Retourne une sous chaine de la chaine en paramétre. Prend en paramétre la chaine, le debut et la fin de la sous chaine souhaitée. Exemple sous_chaine("Bonjour"; 0; 2) = "Bo", sous_chaine("Bonjour"; 1) = "onjour".',index:'Retourne la position de la chaine cherchée dans la chaine. index("Bonjour"; "o") = 1, index("Bonjour"; "o"; 2) = 4',joindre:'Join les elements d\'un tableau et retourne une chaine de caractére. Exemple : joindre(["bla"; "bla"], " ") = "bla bla"'},d[t]=["eval"],d[n]={SI:[r,i,s],TANT_QUE:[o],POUR:[u],SI_NON:[r],DEFINIR_FONCTION:[a],SI_NON_SI:[r,i,s]},d[f]={"SI ":r,POUR:u,TANT_QUE:o,DEFINIR_FONCTION:a},d.openBlock={SI:{tag:"if",error:"Un SI doit être terminé par un FIN_SI"},POUR:{tag:"for",error:"Un POUR doit être terminé par un FIN_POUR"},TANT_QUE:{tag:l,error:"Un TANT_QUE doit être terminé par un FIN_TANT_QUE"}},d.endBlock={FIN_SI:{error:"un FIN_SI doit avoir un SI correspondant.",startTag:"if"},FIN_POUR:{error:"un FIN_POUR doit avoir un POUR correspondant.",startTag:"for"},FIN_TANT_QUE:{error:"un FIN_TANT_QUE doit avoir un TANT_QUE correspondant.",startTag:l}},d[c]={NOMBRE:"number",CHAINE:"string",TABLEAU:"array",BOOLEEN:"boolean"},d[h]={VRAI:!0,FAUX:!1},d[p]={},d.writeOutput=function(){return{erreur:"error",info:"info"}};for(var v in d[c])d[p][d[c][v]]=v;return d.getBooleanName=function(){return d[h]},d.getVarTypes=function(){return d[c]},d.getFunctions=function(){return this.functions},d.getFunctionsDescription=function(){return this[e]},d.getSkipedFunction=function(){return this[t]},d.getStartToEndBlock=function(){return this[n]},d.getStartToLastEndBlock=function(){return this[n]},d.getValidatorOpenBlock=function(){return this.openBlock},d.getValidatorEndBlock=function(){return this.endBlock},d.getAutoCloseTag=function(){return this[f]},d}),define("easyAlgoRuntimeException",[],function(){var e="offset",t=function(t,n){this.message=t,this[e]=n,this.name="RuntimeException"};return t.prototype={toString:function(t){var n=undefined;if(this[e])if(t){var r=this[e];r.begin&&(r=r.begin);var s=t.posFromIndex(r);n="(ligne : "+(s.line+1)+", colonne : "+s.ch+")"}else n="(caract�re : "+this[e]+")";return this.message+(n?n:"")}},t}),define("easyAlgoContext",["easyAlgoRuntimeException","easyAlgoConfiguration"],function(e,t){var n="functions",r="vars",i="childs",s="toUpperCase",o="getParent",u="La variable ",a="toLowerCase",f="formatFunctionName",l="getVar",c="value",h="length",p="ADD_AT_END",d=t.getFunctions(),v=t.getSkipedFunction(),m=function(e,t){e&&e.addChild(this),this.parent=e,this[n]={},this[r]={},this[i]=[],this.from=0,this.to=0,this.contextName=t};return m.prototype={setRange:function(e,t){this.from=e,this.to=t},addChild:function(e){this[i].push(e)},isset:function(t,n,i){t=t[s]();if(t in this[r])return!0;var a=this[o]()&&this[o]().isset(t,n,i);if(!a&&n)throw new e(u+t+" n'est pas definie.",i);return a||!1},formatFunctionName:function(e){function t(e,t){return t?t[s]():""}var n=/[-_]+(.)?/g,e=e.replace(n,t);return Array.indexOf(v,e)>=0?"":e},issetFunction:function(t,r,i){var s=t[a](),u=s in d||s in this[n]||this[f](t)in window||this[o]()&&this[o]().issetFunction(t);if(!u&&r)throw new e("La fonction "+t+" n'existe pas.",i);return u},getVar:function(e){return this[r][e]?this[r][e]:this[o]()?this[o]()[l](e):undefined},getFunction:function(e){var t=e[a]();if(t in d)return d[e];if(t in this[n])return this[n][e];var r=this[f](e);return r in window?window[r]:this[o]()?this[o]().getFunction(e):undefined},getValue:function(e){return this[l](e)[c]},getType:function(e){return this[l](e).type},setValue:function(t,n,r){if(r!=undefined){if(this.getType(t)!="array"&&this.getType(t)!="string")throw new e(u+t+" n'est pas un tableau.");var i=this[l](t);i[c]==undefined&&(i[c]=[]);var s=i[c],o=r[h];if(o>1)for(var a=0;a<o-1;a++){var f=r[a];if(s[f]==undefined||f==p)f==p&&(f=s[h]),s[f]=[];s=s[f]}var d=r[r[h]-1];d==p?s.push(n):s[d]=n}else this[l](t)[c]=n},defineVar:function(e,t){this[r][e]={type:t,value:undefined}},getParent:function(){return this.parent},getAccessibleVars:function(){var e={};if(this[o]()){var t=this[o]().getAccessibleVars();for(var n in t)e[n]=t[n]}for(varName in this[r])e[varName]=this[r][varName].type;return e},getAccessibleFunctions:function(){var e={};if(this[o]()){var t=this[o]().getAccessibleFunctions();for(var r in t)e[r]=t[r]}for(functionName in this[n])e[functionName]=this[n][r];return e},getContextFor:function(e){for(var t in this[i]){var n=this[i][t];if(e>=n.from&&e<=n.to)return n.getContextFor(e)}return this},defineFunction:function(e,t,r){this[n][e[a]()]={parameters:t,body:r}}},m}),define("easyAlgoParser",["easyAlgoConfiguration","codemirror/lib/codemirror","easyAlgoContext"],function(e,t,n){var r="stream",i="languageRunnerFactory",s="createOffset",o="parseExpression",u="eatSpace",a="operationPriority",f="pos",l="context",c="errors",h="checkEndOfLine",p="eatWhile",d="variableNotDefined",v="parseVarname",m="boolean",g="maybeErrors",y="operation",b="booleanOperation",w="parameters",E="StringStream",S="parseChild",x="writeOutput",T="spaces",N="toUpperCase",C="textBetween",k="backUp",L="length",A="prototype",O="command",M="languageInstruction",_="function",D="eatWord",P="startLinePos",H="forConfig",B="parseComparaison",j="comparaison",F="startOffset",I="warning",q="blocs",R="type",U="priority",z="varTypes",W="createArithmetiqueBoolean",X="parseArithmeticalExpression",V="numberRegex",$="functionMalFormated",J="functionNotDefined",K="issetFunction",Q="\n",G="FIN_POUR",Y="parseVarCall",Z="squareNotClosed",et="endOffset",tt="string",nt="END_OF_BLOCK",rt="parseBooleanOperator",it="forMalFormated",st="parseString",ot="booleanName",ut="FIN_TANT_QUE",at="createArithmetique",ft="result",lt="typeNotExist",ct="right",ht="defineFunction",pt="SI_NON_SI",dt="defineVar",vt="skipTo",mt="push",gt="operationRegex",yt="endInstruction",bt="computeErrors";t[E][A].eatTo=function(e,t){var n=this[f];return this[vt](e)?t===undefined||t===!0?this[tt].slice(n,this[f]):!0:!1},t[E][A][C]=function(e,t){return this[tt].slice(e,t)},t[E][A][D]=function(e){var t=this[f];if(!this[p](/[\w\$_]/))return!1;var n=this[C](t,this[f]);return e?n[N]():n};var wt={errorEndOfLine:{message:"La ligne est mal terminée. Du code est présent après votre instruction"},affectationHaveNotEquals:{message:"Une affectation doit avoir la forme suivante. variable = expression"},blockNotEnded:{message:"Le block doit être terminé par {0}"},typeNotExist:{message:"Ce type n'existe pas. Les types possibles sont NOMBRE, CHAINE, BOOLEEN, TABLEAU"},varnameErrorLanguage:{message:"Ce nom de variable ne peut pas être utilisé il fait partie du langage"},lineBeginWithInstruction:{message:"Une ligne doit commencer par une instruction ou une affectation"},writeOutput:{message:'La sortie peut être "erreur" ou "info"'},defineBadWrited:{message:"La définition d'une variable se faire de la facon suivante : DEFINIR nomDeVariable Type"},ifMalFormated:{message:"Un Si s'écrit de la facon suivante : \nSI condition\n	code\nSI_NON_SI condition\n	code\nSI_NON\n	code\nFIN_SI\nSI_NON_SI et SI_NON sont facultatifs"},whileMalFormated:{message:"Un TANT_QUE s'écrit de la facon suivante : \nTANT_QUE condition de continuité\n	code\nFIN_TANT_QUE"},forMalFormated:{message:"Un POUR peux s'écrire de deux façons : \nPOUR variable DE debutInclu A finInclu\n	code\nFIN_POUR\n\nou \nPOUR variable DANS unTableau\n	code\nFIN_POUR"},simpleEqualsInExpression:{message:"Une égalité entre deux expression se fait avec l'opérateur == et non pas ="},exlamationPrevEquals:{message:"L'opérateur de différence est le suivant != et non pas !"},onlyBooleanAreAllow:{message:"Une expression booléenne est attendue"},booleanNotAllowed:{message:"Cette expression ne doit pas retourner un booléen"},emptyExpression:{message:"Une expression vide () n'est pas autorisée"},expressionNotEnded:{message:"Une expression qui commence par une ( doit être terminée par une )"},arrayDefinitionNotEnded:{message:'Un tableau doit être défini de la facon suivante [1; 2; 3; 4; 5] ou ["indice" : value; "indice2" : value2]'},expressionExpected:{message:"Une expression est attendue"},arrayKeyMustBeString:{message:'Une clef de tableau doit être une chaine de caractére ou un nombre comme ceci : ["indice" : value] ou [10 : "bonjour"]'},functionNotAllow:{message:"L'appel à une fonction n'est pas autorisé ici"},squareNotClosed:{message:"Le signe {0} doit être fermé par {1}"},varnameError:{message:"Un nombre de variable ne doit contenir que des caractére alphanumérique et _. Une variable ne doit pas commencer par un nombre"},commentNotEnded:{message:"Votre commentaire n'est pas fermé. Un commentaire peut être de la forme suivante :\n // commentaire sur une line\nou\n/* commentaire \nmultiline\n*/"},stringNotEnded:{message:"Votre chaine de caractére n'est pas fermée. Elle doit être fermée avec le caractére {0}. Par exemple \"Bonjour j\\\"aime les chats\" ou 'Bonjour j\\'aime les chats'"},variableAlreadyDefined:{message:"La variable {0} est déjà définie",severity:I},variableNotDefined:{message:"La variable {0} n'est pas définie",severity:I},functionAlreadyDefined:{message:"La fonction {0} est déjà définie",severity:I},functionNotDefined:{message:"La fonction {0} n'est pas définie",severity:I}},Et=function(e,t,n,i){this.msg=e,this[w]=t,n instanceof xt?(this[F]=n[P],this[et]=n[r][f]):n.begin?(this[F]=n.begin,this[et]=n.end):(this[F]=n,this[et]=i)};Et[A]={toString:function(){var e=this.msg in wt?wt[this.msg].message:this.msg;for(var t in this[w]){var n=this[w][t];Array.isArray(n)&&(n=n.join(", ")),e=e.replace("{"+t+"}",this[w][t])}return e},getStart:function(){return this[F]},getEnd:function(){return this[et]},getSeverity:function(){var e=this.msg in wt?wt[this.msg].severity:undefined;return e||"error"}};var St=function(){this[a]={"-":1,"+":1,"&&":2,"||":3,"*":0,"/":0,"%":0},this.definedVars={}};St[A]={createAffectation:function(e,t,n){return{type:O,commandName:"affectation",varname:e,expression:t,offset:n}},createVar:function(e,t,n,r){return{type:"var",name:e[N](),offset:r,indexs:t,attribute:n}},createFunctionCall:function(e,t,n,r){return{type:_,name:e.toLowerCase(),params:n,offset:r}},createOperation:function(e,t,n,r,i){if(n&&n[y]&&!n[U]&&this[a][n[y]]>=this[a][e]&&n[R]==r){var s=n;while(s.left.left&&!s.left[U]&&s.left[R]==s[R]&&this[a][s.left[y]]>=this[a][s[y]])s=s.left;return s.left=this[at](e,t,s.left,i),n}return{type:r,priority:!1,operation:e,left:t,right:n,offset:i}},createArithmetique:function(e,t,n,r){return this.createOperation(e,t,n,"numerique",r)},createArithmetiqueBoolean:function(e,t,n,r){if(t[y]&&!t[U]&&this[a][t[y]]>=this[a][e]&&t[R]==m){var i=t;while(i[ct][ct]&&!i[ct][U]&&i[ct][R]==i[R]&&this[a][i[ct][y]]>=this[a][i[y]])i=i[ct];return i[ct]=this[W](e,i[ct],n,r),t}return{type:m,priority:!1,operation:e,left:t,right:n,offset:r}},createComparison:function(e,t,n,r){return{type:j,left:e,right:t,operation:n,offset:r}},createWrite:function(e,t){return{type:O,commandName:"write",params:[e],output:t}},createCondition:function(e,t,n,r){return{type:"condition",test:e,yes:t,no:Array.isArray(n)||n==undefined?n:[n],offset:r}},createWhile:function(e,t,n){return{type:"while",test:e,block:t,offset:n}},createFor:function(e,t,n,r,i,s){return{type:"for",varname:e,start:t,end:n,block:i,offset:s,step:r}},createForEach:function(e,t,n,r){return{type:"forEach",varname:e,array:t,block:n,offset:r}},createArray:function(e,t){return{offset:t,elements:e,type:"array"}},createOffset:function(e,t){return e instanceof xt?{begin:e[P],end:e[r][f]}:{begin:e,end:t}},createDefine:function(e,t,n){return{type:O,commandName:"define",varname:e,vartype:t,offset:n}},createRead:function(e,t){return{type:O,commandName:"read",varname:e,offset:t}},createFunction:function(e,t,n,r){return{type:ht,parameters:t,body:n,name:e,offset:r}},createReturn:function(e,t){return{type:O,commandName:"return",expression:e,offset:t}}};var xt=function(t,r){this[i]=t||new St,this[M]={ECRIRE:this.parseWrite,DEFINIR:this.parseDefine,LIRE:this.parseRead,SI:this.parseIf,TANT_QUE:this.parseWhile,POUR:this.parseFor,DEFINIR_FONCTION:this.parseFunction,RETOURNER:this.parseReturn},this[q]={"if":[pt,"SI_NON","FIN_SI"],"while":[ut],"for":[G],"function":["FIN_FONCTION"]},this[H]={at:"A",to:"DE","in":"DANS",step:"PAR"},this[x]=e[x](),this.languageWord=["NOMBRE","CHAINE","TABLEAU","BOOLEEN","ECRIRE","DEFINIR","LIRE","SI","TANT_QUE","POUR",pt,"SI_NON","FIN_SI",G,ut,G,"A","DE","DANS","PAR"],this[V]=/[0-9]/,this.varnameRegex=/[a-zA-Z0-9_]/,this[gt]=/[+\-*\/%]/,this[T]=/[\ \t]/,this[ot]=e.getBooleanName(),this[b]={ET:"&&",OU:"||"},this[z]=e.getVarTypes(),this[nt]="endOfBlock",this[l]=new n(r),this[c]=[]};return xt[A]={initParser:function(e){e instanceof t[E]?this[r]=e:this[r]=new t[E](e+Q,4)},checkEndOfLine:function(){this[r][p](this[T]),this[r].eat("/")&&this.parseComment();if(!this[r].eat(Q)&&!this[r].eol()){var e=this[r][f];throw this[r][vt](Q),new Et("errorEndOfLine",undefined,e,this[r][f])}},parse:function(e,t){this.initParser(e);var n=[],i=this[r][f];while(!this[r].eol())try{var s=this[r][f],o=this.parseLine(t);if(typeof o==tt&&o.indexOf(this[nt])===0)return{endInstruction:o.slice(this[nt][L]+1,o[L]),result:n,errors:this[bt](),context:this[l]};this[h](),o!=undefined&&n[mt](o)}catch(u){if(u instanceof Et)this[c][mt](u),u.toThrow=!0;else if(u[c])for(var a in u[c])this[c][mt](u[c][a]),u[c][a].toThrow=!0;console.log(u),this[r][vt](Q)}if(t&&this[c][L]==0)throw new Et("blockNotEnded",[t],i,this[r][f]);return{errors:this[bt](),result:n,context:this[l]}},computeErrors:function(){var e=this[c];if(this[g])for(var t in this[g]){var n=this[g][t],r=!1;n.msg==d?this[l].isset(n[w][0],!1)||(r=!0):n.msg==J&&(this[l][K](n[w][0],!1)||(r=!0)),r&&e[mt](n)}return e},parseLine:function(e){this[P]=this[r][f],this[r][p](this[T]);var t=this[r].next();if(t==undefined||t==Q)return this[r][k](1),undefined;if(t=="/")return this.parseComment();this[r][k](1);var n=this[r][D](!0);if(n===!1)throw new Et("lineBeginWithInstruction",undefined,this[P],this[r][f]);return e&&Array.indexOf(e,n)>=0?"endOfBlock:"+n:n in this[M]?(this[r][p](this[T]),this[M][n].call(this,n)):this.parseAffectation(n)},parseWrite:function(){var e=this[o](),t="output";this[r][p](this[T]);var n=this[r].peek();if(this[r].eat('"')||this[r].eat("'")){var u=this[r][f]-1;t=this[st](n).toLowerCase();if(!(t in this[x]))throw new Et(x,undefined,u,this[r][f]);t=this[x][t]}return this[i].createWrite(e,t,this[i][s](this))},parseDefine:function(){var e=this[r][f],t=this[v]();if(this[r][p](this[T])){var n=this[r][f],o=this[r][D](!0);if(o in this[z]){if(this[l].isset(t,!1))throw new Et("variableAlreadyDefined",[t],e,n);return this[l][dt](t,this[z][o]),this[i].createDefine(t,this[z][o],this[i][s](this))}throw new Et(lt,undefined,n,this[r][f])}throw new Et("defineBadWrited",undefined,this)},parseRead:function(){var e=this[v]();this[l].isset(e,!1)||this[c][mt](new Et(d,[e],this));var t=this[Y](e,!1);return this[i].createRead(t,this[i][s](this))},parseAffectation:function(e){this[r][k](e[L]);var t=this[r][f],e=this[Y](this[v](),!1);this[r][u]();if(!this[r].eat("="))throw new Et("affectationHaveNotEquals",undefined,this);var n=this[o]();return this[i].createAffectation(e,n,t)},parseChild:function(e,t){var n=new xt(this[i],t||this[l]),s=this[r][f],o=n.parse(this[r],e),u=this[r][f];return t&&t.setRange(s,u),o[l].setRange(s,u),o[c]&&o[c][L]>0&&(t?(this[g]=this[g]||[],this[g]=this[g].concat(o[c])):this[c]=this[c].concat(o[c])),o},parseDefineFunctionParameters:function(){var e=this[r][f],t=this[v]();this[r][p](this[T]);if(!this[r].eat(":"))throw new Et("paramMalFormated",undefined,e,this[r][f]);this[r][p](this[T]);var n=this[r][f],o=this[r][D](!0);if(o in this[z])return this[i].createDefine(t,this[z][o],this[i][s](e,this[r][f]));throw new Et(lt,undefined,n,this[r][f])},parseFunction:function(e){var t=this[r][f],o=this[v]();this[l][K](o,!1)&&this[c][mt](new Et("functionAlreadyDefined",[o],t,this[r][f])),this[r][p](this[T]);if(!this[r].eat("("))throw new Et($,undefined,this);var a=new n(this[l]),d=[];if(!this[r].eat(")")){do{this[r][u]();var m=this.parseDefineFunctionParameters();a[dt](m.varname,m.vartype),d[mt](m),this[r][u]()}while(this[r].eat(";"));if(!this[r].eat(")"))throw new Et($,undefined,this)}this[h](),this[l][ht](o,d);var g=this[S](this[q][_],a);return this[i].createFunction(o,d,g[ft],this[i][s](this))},parseReturn:function(){var e=this[o]();return this[i].createReturn(e,this[i][s](this))},parseIf:function(e){if(this[r].eat(Q))throw new Et("ifMalFormated",undefined,this);var t=this[r][f],n=this[o]();this[h]();var u=this[S](this[q]["if"]),a=undefined;if(u[yt]==this[q]["if"][1]){this[h]();var a=this[S]([this[q]["if"][2]]);a=a[ft]}else if(u[yt]==this[q]["if"][0])var a=this.parseIf(e);return this[i].createCondition(n,u[ft],a,this[i][s](t,this[r][f]))},parseWhile:function(e){if(this[r].eat(Q))throw new Et("whileMalFormated",undefined,this);var t=this[r][f],n=this[o]();this[h]();var u=this[S](this[q]["while"]);return this[i].createWhile(n,u[ft],this[i][s](t,this[r][f]))},parseFor:function(e){if(this[r].eat(Q))throw new Et(it,undefined,this);var t=this[v]();this[l].isset(t,!1)||this[c][mt](new Et(d,[t],this));var n=this[r][f];this[r][u]();var a=this[r][D](!0);if(a==this[H]["to"]){this[r][u]();var p=this[o]();this[r][u]();var m=this[r][D](!0);if(m==this[H]["at"]){var g=this[o](),y=this[r][f];this[r][u]();var b=this[r][D](!0),w=undefined;b==this[H]["step"]?w=this[o]():this[r][k](this[r][f]-y),this[h]();var E=this[S](this[q]["for"]);return this[i].createFor(t,p,g,w,E[ft],this[i][s](n,this[r][f]))}}else if(a==this[H]["in"]){this[r][u]();var x=this[o]();this[h](),this[l][dt](t+"_INDEX","MIXED");var E=this[S](this[q]["for"]);return this[i].createForEach(t,x,E[ft],this[i][s](n,this[r][f]))}throw new Et(it,undefined,this)},parseExpression:function(){return this.parseComparaisonExpression()},parseComparaisonOperator:function(){var e=this[r][f],t=undefined;this[r][u](),this[r].eat("<")&&(this[r].eat(">")?t="!=":this[r].eat("=")?t="<=":t="<"),this[r].eat(">")&&(this[r].eat("=")?t=">=":t=">");if(this[r].eat("=")){if(!this[r].eat("="))throw new Et("simpleEqualsInExpression",undefined,e,this[r][f]);t="=="}if(this[r].eat("!")){if(!this[r].eat("="))throw new Et("exlamationPrevEquals",undefined,e,this[r][f]);t="!="}return t==undefined&&this[r][k](this[r][f]-e),t},parseBooleanOperator:function(){var e=this[b],t=function(t,n){if(t==undefined)return!1;var r=!1;t=t[N]();for(var i in e)if(i.charAt(n)==t)return!0;return r},n=this[r][f];this[r][u]();var i=this[r].next(),s="";while(t(i,s[L]))s+=i,i=this[r].next();return s=s[N](),s in this[b]?s:(this[r][k](this[r][f]-n),undefined)},parseComparaisonExpression:function(){var e=this[B](),t=this[rt]();while(t!=undefined){this[r][u]();var n=this[r][f],s=this[B]();if(typeof s!=m&&s[R]!=m&&s[R]!=j&&s[R]!=_||typeof e!=m&&e[R]!=m&&e[R]!=j&&e[R]!=_)throw new Et("onlyBooleanAreAllow",undefined,n,this[r][f]);e=this[i][W](this[b][t],e,s,n),t=this[rt]()}return e},parseComparaison:function(){var e=this[r][f],t=this[X](),n=this.parseComparaisonOperator();if(n){this[r][u]();var o=this[B]();return this[i].createComparison(t,o,n,this[i][s](e,this[r][f]))}return t},parseArithmeticalExpression:function(){var e=this[r][f],t=this.parsePrimitive(),n=this[r][f];this[r][u]();var o=this[r].eat(this[gt]);if(o&&(o!="/"||this[r].peek()!="/"&&this[r].peek()!="*")){this[r][u]();var a=this[X]();if(typeof t==m||typeof a==m)throw new Et("booleanNotAllowed",undefined,e,this[r][f]);return this[i][at](o,t,a,this[i][s](e,this[r][f]))}return this[r][k](this[r][f]-n),t},parsePrimitive:function(){var e=this[r][f];this[r][u]();var t=this[r].next();if(t=="("){if(this[r].eat(")"))throw new Et("emptyExpression",undefined,this[r][f]);var n=this[r][f],a=this[o]();if(!this[r].eat(")"))throw new Et("expressionNotEnded",undefined,this[i][s](n,this[r][f]));return a[U]=!0,a}if(t=="'"||t=='"')return this[st](t);if(t=="["){var n=this[r][f];if(this[r].eat("]"))this[r][k](1);else{var h=[];do h[mt](this.parseArrayCell());while(this[r].eat(";"))}this[r][u]();if(!this[r].eat("]"))throw new Et("arrayDefinitionNotEnded",undefined,this[i][s](n,this[r][f]));return this[i].createArray(h,this[i][s](n,this[r][f]))}this[r][k](1);if(isNaN(t)&&t!="-"){var p=this[v]();if(p in this[ot])return this[ot][p];var m=this[Y](p,!0);return m[R]=="var"&&(this[l].isset(m.name,!1)||this[c][mt](new Et(d,[m.name],m.offset))),m}if(this[V].test(t)||t=="-"){var g=this.parseNumber();return g}throw new Et("expressionExpected",undefined,this[i][s](e,this[r][f]))},parseArrayCell:function(){var e=this[r][f];this[r][u]();var t=this[o]();this[r][u]();if(this[r].eat(":")){if(typeof t!=tt&&typeof t!="number")throw new Et("arrayKeyMustBeString",undefined,this[i][s](e,this[r][f]));this[r][u]();var n=this[o]();return{expression:n,name:t,offset:this[i][s](e,this[r][f])}}return{expression:t,offset:this[i][s](e,this[r][f])}},parseNumber:function(){var e=this[r].eat("-")?-1:1,t=this[r][f];this[r][p](this[V]);var n=this[r][C](t,this[r][f]);if(this[r].eat(".")||this[r].eat(",")){var t=this[r][f];this[r][p](this[V]);var i=this[r][C](t,this[r][f]);return e*parseFloat(n+"."+i)}return e*parseInt(n,10)},parseVarCall:function(e,t){var n=undefined,o=!1,a=[],h=this[r][f];this[r][p](this[T]);var d=this[r][f];if(this[r].eat("(")){if(!t)throw new Et("functionNotAllow",undefined,d,this[r][f]);this[r][u](),a=this.parseFunctionParameters();if(!this[r].eat(")"))throw new Et(Z,["(",")"],d,this[r][f]);o=!0}if(this[r].eat("[")){n=[];do n[mt](this.parseVarIndex());while(this[r].eat("["))}return o?(this[l][K](e,!1)||this[c][mt](new Et(J,[e],h-e[L],h)),this[i].createFunctionCall(e,n,a,d)):this[i].createVar(e,n,undefined,this[i][s](h-e[L],h))},parseFunctionParameters:function(){this[r][u]();if(this[r].peek()==")")return[];var e=[];do this[r][u](),e[mt](this[o]()),this[r][u]();while(this[r].eat(";"));return e},parseVarname:function(){var e=this[r][f];this[r][p](this.varnameRegex);var t=this[r][C](e,this[r][f])[N]();if(t.trim()[L]==0)throw new Et("varnameError",undefined,e,this[r][f]);if(Array.indexOf(this.languageWord,t)>=0)throw this[r][k](this[r][f]-e),new Et("varnameErrorLanguage",undefined,e,this[r][f]+t[L]);return t},parseVarIndex:function(){var e=this[r][f];this[r][u]();if(this[r].eat("]"))return"ADD_AT_END";var t=this[o]();if(!this[r].eat("]"))throw new Et(Z,["[","]"],e,this[r][f]);return t},parseComment:function(){var e=this[r][f];if(this[r].eat("*")){var t=!1;do{t=this[r][vt]("*");if(!t)throw this[r].skipToEnd(),new Et("commentNotEnded",undefined,e-1,this[r][f]);this[r].eat("*"),t=this[r].eat("/")}while(!t)}else this[r].eat("/")&&this[r][vt](Q)},parseString:function(e){var t=this[r][f],n=this[r].eatTo(e);if(n===!1)throw this[r].skipToEnd(),new Et("stringNotEnded",[e],t,this[r][f]);var i=this[r][tt].slice(this[r][f]-1,this[r][f]);return this[r].next(),i=="\\"&&(subStringRead=this[st](e),n+=e+subStringRead),n}},xt}),function(e){function F(e){var t=e.code,n=e[p];Object[i](this,"code",{set:function(e){t=e},get:function(){return t}}),Object[i](this,p,{set:function(e){n=e},get:function(){return n}})}function I(e,t){var n=t;t[0]!=nt&&(n=e,n=e!=nt?n+(nt+t):n+t);for(var n=n[M](nt),r=0;r<n[c];++r)".."==n[r]&&(n[r-1]="",n[r]="");return n=n.filter(function(e){return e}).join(nt),n[0]!=nt&&(n=nt+n),n=n[y](/\.\//g,nt),n=n[y](/\/\//g,nt),n=n[y](/\/\./g,nt),n[n[c]-1]==nt&&n!=nt&&(n=n.substring(0,n[c]-1)),n}function q(e){var t=l;this[x]=e[x]||0,this[p]=e[p]||"",this[O]=e[O]||"",this[r]=e[r]||l,Object[i](this,k,{enumerable:!0,get:function(){return t},set:function(e){t=e,this[x]=t[x],this[p]=t[p],this[O]=t[O],this[r]=t[r]}.bind(this)})}function R(e){if(!e)throw Error("Expected fileEntry argument to write.");var t=0,n=e[h]?e[h][k]:l;Object[i](this,"position",{get:function(){return t}}),Object[i](this,c,{get:function(){return n?n[x]:0}}),this.seek=function(e){t=e,t>this[c]&&(t=this[c]),0>t&&(t+=this[c]),0>t&&(t=0)},this.truncate=function(e){n=n?e<this[c]?n.slice(0,e):new Blob([n,new Uint8Array(e-this[c])],{type:n[O]}):new Blob([]),t=0,this.write(n)},this.write=function(i){if(!i)throw Error("Expected blob argument to write.");this.onwritestart&&this.onwritestart();if(n){var s=n.slice(0,t),o=n.slice(t+i[x]),u=t-s[x];0>u&&(u=0),n=new Blob([s,new Uint8Array(u),i,o],{type:n[O]})}else n=new Blob([i],{type:i[O]});e[h][k]=n,e[h][r]=i[r]||l,tt.put(e,function(){t+=i[x],this.onwriteend&&this.onwriteend()}.bind(this),this[b])}}function U(e){var n=!1;this.readEntries=function(r,i){if(!r)throw Error(t);n?r([]):tt[_](e[s],function(e){n=!0,r(e)},i)}}function z(e,t){this[C]=e||l,this.size_=t||0}function W(){}function X(e){this[h]=l,Object[i](this,v,{enumerable:!0,get:function(){return!0}}),Object[i](this,d,{enumerable:!0,get:function(){return!1}}),e&&(this[h]=e[h],this[p]=e[p],this[s]=e[s],this[u]=e[u])}function V(e){Object[i](this,v,{enumerable:!0,get:function(){return!1}}),Object[i](this,d,{enumerable:!0,get:function(){return!0}}),e&&(this[p]=e[p],this[s]=e[s],this[u]=e[u])}function $(t){et=t==e[L]?"Temporary":"Persistent",this[p]=(location.protocol+location.host)[y](/:/g,"_")+":"+et,this.root=new V,this.root[s]=nt,this.root[u]=this,this.root[p]=""}function J(e){switch(e[T].errorCode){case 12:console.log("Error - Attempt to open db with a lower version than the current one.");break;default:console.log("errorCode: "+e[T].errorCode)}console.log(e,e.code,e.message)}var t="Expected successCallback argument.",n="prototype",r="lastModifiedDate",i="defineProperty",s="fullPath",o="entries",u="filesystem",a="create",f="INVALID_MODIFICATION_ERR",l=null,c="length",h="file_",p="name",d="isDirectory",v="isFile",m="transaction",g="objectStore",y="replace",b="onerror",w="oncomplete",E="constructor",S="delete",x="size",T="target",N="requestFileSystem",C="modificationTime_",k="blob_",L="TEMPORARY",A="result",O="type",M="split",_="getAllEntries",D="NOT_FOUND_ERR",P="readwrite",H="onabort",B="onsuccess",j="readonly";if(!e[N]&&!e.webkitRequestFileSystem){var K=e.indexedDB||e.mozIndexedDB||e.msIndexedDB;if(K){e[L]=0,e.PERSISTENT=1,void 0===e.FileError&&(window.FileError=function(){},FileError[n][n]=Error[n]),FileError[f]=9,FileError[D]=1,F[n]=FileError[n],F[n].toString=Error[n].toString;var Q=new F({code:FileError[f],name:f}),G=new F({code:1e3,name:"Not implemented"}),Y=new F({code:FileError[D],name:"Not found"}),Z=l,et="temporary",tt={db:l},nt="/",rt=String.fromCharCode(nt.charCodeAt(0)+1);q[n][E]=q,z[n]={get modificationTime(){return this[C]},get size(){return this.size_}},W[n]={name:l,fullPath:l,filesystem:l,copyTo:function(){throw G},getMetadata:function(e,n){if(!e)throw Error(t);try{this[v]?e(new z(this[h][r],this[h][x])):n(new F({code:1001,name:"getMetadata() not implemented for DirectoryEntry"}))}catch(i){n&&n(i)}},getParent:function(){throw G},moveTo:function(){throw G},remove:function(e,n){if(!e)throw Error(t);tt[S](this[s],function(){e()},n)},toURL:function(){return"filesystem:"+(location.protocol+"//"+location.host)+nt+et.toLowerCase()+this[s]}},X[n]=new W,X[n][E]=X,X[n].createWriter=function(e){e(new R(this))},X[n].file=function(e,n){if(!e)throw Error(t);if(l==this[h]){if(!n)throw Y;n(Y)}else{var i=l==this[h][k]?this[h]:this[h][k];i[r]=this[h][r],e(i)}},V[n]=new W,V[n][E]=V,V[n].createReader=function(){return new U(this)},V[n].getDirectory=function(e,t,n,r){e=I(this[s],e),tt.get(e,function(i){t||(t={}),!0===t[a]&&!0===t.exclusive&&i?r&&r(Q):!0===t[a]&&!i?(i=new V,i[p]=e[M](nt).pop(),i[s]=e,i[u]=Z,tt.put(i,n,r)):!0===t[a]&&i?i[d]?n(new V(i)):r&&r(Q):(!t[a]||!1===t[a])&&!i?e==nt?(i=new V,i[p]="",i[s]=nt,i[u]=Z,n(i)):r&&r(Y):(!t[a]||!1===t[a])&&i&&i[v]?r&&r(Q):n(new V(i))},r)},V[n].getFile=function(e,t,n,r){e=I(this[s],e),tt.get(e,function(i){t||(t={}),!0===t[a]&&!0===t.exclusive&&i?r&&r(Q):!0===t[a]&&!i?(i=new X,i[p]=e[M](nt).pop(),i[s]=e,i[u]=Z,i[h]=new q({size:0,name:i[p],lastModifiedDate:new Date}),tt.put(i,n,r)):!0===t[a]&&i?i[v]?n(new X(i)):r&&r(Q):(!t[a]||!1===t[a])&&!i?r&&r(Y):(!t[a]||!1===t[a])&&i&&i[d]?r&&r(Q):n(new X(i))},r)},V[n].removeRecursively=function(e,n){if(!e)throw Error(t);this.remove(e,n)},tt.open=function(e,t,n){var r=this,e=K.open(e[y](":","_"));e[b]=n||J,e.onupgradeneeded=function(e){r.db=e[T][A],r.db[b]=J,r.db.objectStoreNames.contains(o)||r.db.createObjectStore(o)},e[B]=function(e){r.db=e[T][A],r.db[b]=J,t(e)},e.onblocked=n||J},tt.close=function(){this.db.close(),this.db=l},tt.drop=function(e,t){if(this.db){var n=K.deleteDatabase(this.db[p]);n[B]=function(t){e(t)},n[b]=t||J,tt.close()}},tt.get=function(e,t,n){if(this.db){var r=this.db[m]([o],j),e=IDBKeyRange.bound(e,e+rt,!1,!0),i=r[g](o).get(e);r[H]=n||J,r[w]=function(){t(i[A])}}},tt[_]=function(e,t,n){if(this.db){var r=[],i=l;e!=nt&&(i=IDBKeyRange.bound(e+nt,e+rt,!1,!0));var u=this.db[m]([o],j);u[H]=n||J,u[w]=function(){r=r.filter(function(t){var n=t[s][M](nt)[c],r=e[M](nt)[c];if(e==nt&&n<r+1||e!=nt&&n==r+1)return t}),t(r)},u[g](o).openCursor(i)[B]=function(e){if(e=e[T][A]){var t=e.value;r.push(t[v]?new X(t):new V(t)),e["continue"]()}}}},tt[S]=function(e,t,n){if(this.db){var r=this.db[m]([o],P);r[w]=t,r[H]=n||J,e=IDBKeyRange.bound(e,e+rt,!1,!0),r[g](o)[S](e)}},tt.put=function(e,t,n){if(this.db){var r=this.db[m]([o],P);r[H]=n||J,r[w]=function(){t(e)},r[g](o).put(e,e[s])}},e.addEventListener("beforeunload",function(){tt.db.close()},!1),e[N]=function(t,n,r,i){t!=e[L]&&t!=e.PERSISTENT&&i?i(Q):(Z=new $(t,n),tt.open(Z[p],function(){r(Z)},i))},e.resolveLocalFileSystemURL=
function(e,t,n){n&&n(G)},e===window&&e.RUNNING_TESTS&&(e.Entry=W,e.FileEntry=X,e.DirectoryEntry=V,e.resolveToFullPath_=I,e.Metadata=z)}}}(self),define("ffFileSystem",function(){}),define("services/fileSystem",["ffFileSystem"],function(){var t="requestQuota",n="log",r="root",i="/",s="getDirectory",o="length",u="getFile",a=window.requestFileSystem||window.webkitRequestFileSystem,f=navigator.webkitPersistentStorage,l={isSupported:function(){return a!==undefined},initFs:function(r,i,s){var o=this;f&&f[t]?f[t](r,function(e){a(PERSISTENT,r,function(e){o.init(e),i&&i(o)},function(e){console[n](e),s&&s(e)})},function(e){console[n]("Error",e),s&&s(e)}):a(PERSISTENT,r,function(e){l.init(e),i&&i(o)},function(t){console[n](t),s&&s(e)})},init:function(e){this.fs=e},mkdir:function(e,t,u){var a=this;u=u||this.fs[r];var f=e.split(i);u[s](f[0],{create:!0},function(e){f[o]>1?a.mkdir(f.slice(1).join(i),t,e):t(e)},function(e){console[n](e)})},listDir:function(e,t,u,a){var f=this;a=a||this.fs[r];var l=e.split(i);a[s](l[0],{},function(e){if(l[o]>1)f.listDir(l.slice(1).join(i),t,u,e);else{var r=e.createReader();r.readEntries(function(e){var n=[];e[o]?n=e:e.forEach(function(e,t){n.push(e)}),t(n)},function(e){console[n](e),u&&u(e)})}},function(e){console[n](e),u&&u(e)})},touch:function(e,t,i,s){s=s||this.fs[r];var o=this;s[u](e,{create:!0,exclusive:!0},function(e){t(e)},function(e){console[n](e),i&&i(e)})},readFile:function(e,t,i){i=i||this.fs[r];var s=this;i[u](e,{},function(e){e.file(function(e){s.readyFileEntry(e)})},function(e){console[n](e)})},readFileEntry:function(e,t){e.file(function(e){var n=new FileReader;n.onloadend=function(e){t(e.target.result)},n.readAsText(e)})},writeFile:function(e,t,i){i=i||this.fs[r];var s=this;i[u](e,{},function(e){e.createWriter(function(e){e.onwriteend=function(){e[o]===0&&e.write(new Blob([t]))},e.truncate(0)})},function(e){console[n](e)})},removeFile:function(e,t){this.fs[r][u](e,{},function(e){e.remove(function(){t&&t()})},function(r){console[n](r,e),t&&t()})}};return l}),define("services/templatePreloader",["app"],function(e){e.factory("templatePreloader",["$http","$injector","$templateCache",function(e,t,n){return function(t){e.get(t,{cache:n}).then(function(e){return e.data})}}])}),define("controllers/popUp",["app","services/templatePreloader"],function(e){var t="controller",n="popUpController",r="buttons",i="Alerte",s="btn-success",o="btn-warning",u="annuler",a="popUp.html",f="templateUrl";e[t](n,["$scope","$modalInstance","title","message",r,function(e,t,n,a,f){e.title=n||i,e.content=a||"Un message !!!!",e[r]=f||[{classes:s,label:"ok",onClick:function(){return console.log("OK"),!1}},{classes:o,label:u,onClick:function(){return console.log(u),!0}}],e.close=function(e){e?t.dismiss("cancel"):t.close()},e.buttonClicked=function(n){var r=undefined;n&&(r=n(t,e)),e.close(r===!1)}}]).factory("popUpManager",["$modal","templatePreloader",function(e,r){return r(a),service={templateUrl:a,controller:n,warning:function(n,r){return e.open({templateUrl:this[f],controller:this[t],size:"lg",resolve:{title:function(){return n||i},message:function(){return r},buttons:function(){return[{classes:o,label:"ok"}]}}})},confirm:function(n,r,u,a){return e.open({templateUrl:this[f],controller:this[t],size:"lg",resolve:{title:function(){return n||i},message:function(){return r},buttons:function(){return[{classes:s,label:"Oui",onClick:u},{classes:o,label:"Non",onClick:a}]}}})}}}]);var l={};return l}),define("controllers/editorInstructionPopUp",["app","easyAlgoConfiguration","easyAlgoParser","controllers/popUp"],function(e,t,n){var r="arrayValues",i="selected",s="isEmpty",o="varname",u="refactorExpression",a="	// code executé pour chaques element du tableau",f="expression",l="\nfin_fonction",c="length",h="arrayType",p="\n",d="arrayCurrentValue",v="definir_fonction ",m="definir ",g="escapeString",y="tabulate",b="help",w="functions",E="message",S="	retourner ",x="array",T="name",N="\nfin_pour",C="substring",k='"',L="boolean",A="trim",O="number",M="replace",_="; ",D="	",P={isEmpty:function(e){return e==undefined||e[A]()[c]==0},define:function(e){return!this[s](e[o])&&!this[s](e.type)},read:function(e){return!this[s](e[o])},afectation:function(e){if(e.varType==x){if(!e[h])return!1;if(e[h]==3&&!e[f])return!1}return e[o]!=undefined},"if":function(e){return!this[s](e.test)},"while":function(e){return!this[s](e.test)},foreach:function(e){return!this[s](e[o])&&!this[s](e[x])},"for":function(e){return!this[s](e[o])&&!this[s](e.start)&&!this[s](e.end)},functionSimple:function(e){return!this[s](e[T])&&!this[s](e[f])},functionConditional:function(e){return!this[s](e[T])&&!this[s](e.paramType)&&!this[s](e.elseReturn)},"function":function(e){return!this[s](e[T])}},H={tabulate:function(e){return e[M](/\n/g,"\n	")},escapeString:function(e){return e[M](/"/g,'\\"')},refactorExpression:function(e,t){var r=new n(undefined,e);r.initParser(t);try{r.parseExpression()}catch(i){return k+this[g](t)+k}return t},define:function(e,t){return{code:m+t[o]+" "+t.type}},read:function(e,t){return{code:"lire "+t[o]}},afectation:function(e,t){var n=t.varType,i=undefined;console.log(n);if(n=="string"&&t[E])i=k+this[g](t[E])+k;else if(n==O&&t[O])i=t[O];else if(n==L&&t[L])i=t[L];else if(n==x)if(t[h]==1){i="[";if(t[r]){for(var s in t[r])i+=this[u](e,t[r][s])+_;i=i[C](0,i[c]-2)}i+="]"}else if(t[h]==2){i="[";if(t[r]){for(var s in t[r]){var a=t[r][s];i+=this[u](e,a.key)+" : "+this[u](e,a.value)+_}i=i[C](0,i[c]-2)}i+="]"}else t[h]==3&&(t[o]+="["+(t.index||"")+"]");return i||(i=this[u](e,t[f])),{code:t[o]+" = "+i}},write:function(e,t){var n=undefined;return t[E]&&(n=k+this[g](t[E])+k),n||(n=this[u](e,t[f])),{code:"ecrire "+n+(t.output?" '"+t.output+"'":"")}},"if":function(e,t,n){var r="si "+t.test+p;return n?r+=D+this[y](n[A]()):r+="	// code si le test est vrai",t.elseBlock&&(r+="\nSI_NON\n	//code si le test est faux"),r+="\nFIN_SI",{overrideSelection:!0,code:r}},"while":function(e,t,n){var r="tant_que "+t.test+p;return n?r+=D+this[y](n[A]()):r+="	// code executé dans la boucle",r+="\nfin_tant_que",{overrideSelection:!0,code:r}},foreach:function(e,t,n){var r="";return e.isset(t[o],!1)||(r=m+t[o]+" chaine // attention vérifier le type de la variable \n"),r+="pour "+t[o]+" dans "+t[x]+p,n?r+=D+this[y](n[A]()):r+=a,r+=N,{overrideSelection:!0,code:r}},"for":function(e,t,n){var r="";return e.isset(t[o],!1)||(r=m+t[o]+" nombre\n"),r+="pour "+t[o]+" de "+t.start+" a "+t.end,t.step&&(r+=" par "+t.step),r+=p,n?r+=D+this[y](n[A]()):r+=a,r+=N,{overrideSelection:!0,code:r}},functionSimple:function(e,t){var n="// "+t[T]+"(x) = "+t[f];return n+="\ndefinir_fonction "+t[T]+"(x : nombre)\n",n+=S+t[f],n+=l,{overrideSelection:!1,code:n,addAtStart:!0}},functionConditional:function(e,t){var n=v+t[T]+"(x : "+t.paramType+")\n";if(t[r]){for(var i in t[r]){var s=t[r][i];n+="	si"+(i==0?" ":"_non_si ")+s.condition+p,n+="		retourner "+s[f]+p}n+="	fin_si\n"}return n+=S+t.elseReturn,n+=l,{overrideSelection:!1,code:n,addAtStart:!0}},"function":function(e,t){var n=v+t[T]+"(";if(t[r]){for(var i in t[r]){var s=t[r][i];n+=s[T]+" : "+s.type+_}n=n[C](0,n[c]-2)}return n+=")\n",n+="	// code de la fonction\n",n+='	retourner ""//compléter la fonction avec la valeur à retourner',n+=l,{overrideSelection:!1,code:n,addAtStart:!0}}};e.controller("editorInstructionPopUp",["$scope","$modalInstance","$controller","$timeout","codeMirror",function(e,s,o,u,a){angular.extend(this,o("popUpController",{$scope:e,$modalInstance:s,title:"",message:"",buttons:{}})),e.sections={Instruction:{"Définir une variable":{id:"define",title:"Définir une variable"},"Lire une variable":{id:"read",title:"Lire une variable"},"Ecrire un message":{id:"write",title:"Ecrire un message"},"Afecter une variable":{id:"afectation",title:"Afectation d'une variable"},position:1},"Structure conditionelle":{Si:{id:"if",title:"Condition"},position:2},"Structure itérative":{"Execution tant que vrai":{id:"while",title:"Boucle tant que"},"Parcour entre deux nombres":{id:"for",title:"Boucle pour"},"Parcour d'un tableau":{id:"foreach",title:"Boucle pour chaque"},position:3},Fonctions:{"Fonction simple":{id:"functionSimple",title:"Fonction simple"},"Fonction conditionnel":{id:"functionConditional",title:"Fonction conditionnel"},Fonction:{id:"function",title:"Fonction"}},Aide:{"Liste de fonctions":{type:b,id:w,title:"Fonctions"},"Liste des variables":{type:b,id:"variables",title:"Variables"},position:5}},e.configuration=t,e[i]=undefined,e.setSelected=function(t){t.type==b?e[b]=t:(e[i]&&(e[i][i]=!1),e[i]=t,t[i]=!0,e.isValidated=!1)},e.closeHelp=function(){e[b]=undefined};var f=new n,l=f.parse(a.getValue()),h=a.indexFromPos(a.getCursor()),v=l.context.getContextFor(h);console.log(l.context),e.vars=v.getAccessibleVars(),e[w]=t.getFunctions(),e.accessibleFunctions=v.getAccessibleFunctions(),console.log(e[w]),e.functionsDescription=t.getFunctionsDescription(),e.removeArray=function(t){e[i][r].splice(t,1)},e.addArrayValue=function(t){if(!e[i][d])return;e[i][r]==undefined&&(e[i][r]=[]),e[i][r].push(e[i][d]),e[i][d]=undefined},e.validateForm=function(){e.isValidated=!0;var t=e[i]||{};if(t.id in P){var n=P[t.id](t);return n}return!0},s.result.then(function(){function t(e){var t="";for(var n=0;n<e;++n)t+=" ";return t}if(!e[i]||!(e[i].id in H))return;var n=a.getMode({},"easyAlgo");u(function(){var r=a.listSelections()[0],s=e[i]||{},o=undefined;if(r.head.line!=r.anchor.line||r.head.ch!=r.anchor.ch){var u=CodeMirror.Pos(r.head.line,0),f=a.getLine(r.anchor.line),l=CodeMirror.Pos(r.anchor.line,f[c]);o=a.getRange(u,l)}var h=H[s.id](v,s,o),d=h.code,m=h.overrideSelection||!1,g=h.addAtStart,y=r.head,b=r.head;m&&o?(y=u,b=l):g&&(y={ch:0,line:0},b=y);var w=a.getTokenAt(y),E=n.indent(w.state,d),S=t(E);d=S+d,d=d[M](/\n/g,p+S);var x=a.getRange(CodeMirror.Pos(y.line,0),y),T=a.getLine(y.line);x[A]()[c]>0?(y.ch=T[c],d=p+d):T[A]()[c]>0?(y.ch=0,d+=m?"":p):y.ch=0,a.replaceRange(d,y,b),a.setSelection(y,y)})})}])}),function(e){var t="object",n="../../lib/codemirror";typeof exports==t&&typeof module==t?e(require(n)):typeof define=="function"&&define.amd?define("codemirror/mode/xml/xml",[n],e):e(CodeMirror)}(function(e){var t="tokenize",n="hasOwnProperty",r="tagName",i="context",s="error",o=null,u="tagStart",a="eatWhile",f="selfcloseTag",l="string",c="word",h="xml",p="contextGrabbers",d="indented",v="endTag",m="match",g="tag bracket",y="tag error",b="meta",w="stringStartCol",E="closeTag",S="defineMIME",x="isInAttribute",T="comment",N="openTag",C="implicitlyClosed",k="text/html",L="htmlMode",A="noIndent";e.defineMode(h,function(S,k){function J(e,n){function r(r){return n[t]=r,r(e,n)}var i=e.next();if(i=="<")return e.eat("!")?e.eat("[")?e[m]("CDATA[")?r(rt("atom","]]>")):o:e[m]("--")?r(rt(T,"-->")):e[m]("DOCTYPE",!0,!0)?(e[a](/[\w\._\-]/),r(it(1))):o:e.eat("?")?(e[a](/[\w\._\-]/),n[t]=rt(b,"?>"),b):(St=e.eat("/")?E:N,n[t]=Z,g);if(i=="&"){var u;return e.eat("#")?e.eat("x")?u=e[a](/[a-fA-F\d]/)&&e.eat(";"):u=e[a](/[\d]/)&&e.eat(";"):u=e[a](/[\w\.\-:]/)&&e.eat(";"),u?"atom":s}return e[a](/[^&<]/),o}function Z(e,n){var i=e.next();if(i==">"||i=="/"&&e.eat(">"))return n[t]=J,St=i==">"?v:f,g;if(i=="=")return St="equals",o;if(i=="<"){n[t]=J,n.state=at,n[r]=n[u]=o;var s=n[t](e,n);return s?s+" tag error":y}return/[\'\"]/.test(i)?(n[t]=nt(i),n[w]=e.column(),n[t](e,n)):(e[m](/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),c)}function nt(e){var n=function(n,r){while(!n.eol())if(n.next()==e){r[t]=Z;break}return l};return n[x]=!0,n}function rt(e,n){return function(r,i){while(!r.eol()){if(r[m](n)){i[t]=J;break}r.next()}return e}}function it(e){return function(n,r){var i;while((i=n.next())!=o){if(i=="<")return r[t]=it(e+1),r[t](n,r);if(i==">"){if(e==1){r[t]=J;break}return r[t]=it(e-1),r[t](n,r)}}return b}}function st(e,t,s){this.prev=e[i],this[r]=t,this.indent=e[d],this.startOfLine=s;if(wt.doNotIndent[n](t)||e[i]&&e[i][A])this[A]=!0}function ot(e){e[i]&&(e[i]=e[i].prev)}function ut(e,t){var s;for(;;){if(!e[i])return;s=e[i][r];if(!wt[p][n](s)||!wt[p][s][n](t))return;ot(e)}}function at(e,t,n){return e==N?(n[u]=t.column(),ft):e==E?lt:at}function ft(e,t,n){return e==c?(n[r]=t.current(),xt="tag",pt):(xt=s,ft)}function lt(e,t,o){if(e==c){var u=t.current();return o[i]&&o[i][r]!=u&&wt[C][n](o[i][r])&&ot(o),o[i]&&o[i][r]==u?(xt="tag",ct):(xt=y,ht)}return xt=s,ht}function ct(e,t,n){return e!=v?(xt=s,ct):(ot(n),at)}function ht(e,t,n){return xt=s,ct(e,t,n)}function pt(e,t,a){if(e==c)return xt="attribute",dt;if(e==v||e==f){var l=a[r],h=a[u];return a[r]=a[u]=o,e==f||wt.autoSelfClosers[n](l)?ut(a,l):(ut(a,l),a[i]=new st(a,l,h==a[d])),at}return xt=s,pt}function dt(e,t,n){return e=="equals"?vt:(wt.allowMissing||(xt=s),pt(e,t,n))}function vt(e,t,n){return e==l?mt:e==c&&wt.allowUnquoted?(xt=l,pt):(xt=s,pt(e,t,n))}function mt(e,t,n){return e==l?mt:pt(e,t,n)}var gt=S.indentUnit,yt=k.multilineTagIndentFactor||1,bt=k.multilineTagIndentPastTag;bt==o&&(bt=!0);var wt=k[L]?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},Et=k.alignCDATA,St,xt;return{startState:function(){return{tokenize:J,state:at,indented:0,tagName:o,tagStart:o,context:o}},token:function(e,n){!n[r]&&e.sol()&&(n[d]=e.indentation());if(e.eatSpace())return o;St=o;var i=n[t](e,n);return(i||St)&&i!=T&&(xt=o,n.state=n.state(St||i,e,n),xt&&(i=xt==s?i+" error":xt)),i},indent:function(s,o,a){var f=s[i];if(s[t][x])return s[u]==s[d]?s[w]+1:s[d]+gt;if(f&&f[A])return e.Pass;if(s[t]!=Z&&s[t]!=J)return a?a[m](/^(\s*)/)[0].length:0;if(s[r])return bt?s[u]+s[r].length+2:s[u]+gt*yt;if(Et&&/<!\[CDATA\[/.test(o))return 0;var l=o&&/^<(\/)?([\w_:\.-]*)/.exec(o);if(l&&l[1])while(f){if(f[r]==l[2]){f=f.prev;break}if(!wt[C][n](f[r]))break;f=f.prev}else if(l)while(f){var c=wt[p][f[r]];if(!c||!c[n](l[2]))break;f=f.prev}while(f&&!f.startOfLine)f=f.prev;return f?f.indent+gt:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:k[L]?"html":h,helperType:k[L]?"html":h}}),e[S]("text/xml",h),e[S]("application/xml",h),e.mimeModes[n](k)||e[S](k,{name:h,htmlMode:!0})}),function(e){var t="object",n="../../lib/codemirror";typeof exports==t&&typeof module==t?e(require(n)):typeof define=="function"&&define.amd?define("codemirror/mode/javascript/javascript",[n],e):e(CodeMirror)}(function(e){var t="javascript",n=null,r="]",i="tokenize",s="match",o="number",u="spread",a="=>",f="operator",l="eatWhile",c="comment",h="lastType",p="keyword c",d="string-2",v="current",m="variable",g="jsonld-keyword",y="string",b="{",w="quasi",E="fatArrowAt",S="indented",x="align",T="localVars",N="context",C="state",k="stream",L="marked",A="hasOwnProperty",O="lexical",M="length",_="globalVars",D="stat",P=")",H=";",B="var",j="keyword a",F="form",I="keyword b",q="}",R="else",U="function",z="for",W="switch",X="default",V="property",$="keyword",J="variable-3",K="extends",Q="atom",G="defineMIME";e.defineMode(t,function(G,Y){function Z(e){var t=!1,i,s=!1;while((i=e.next())!=n){if(!t){if(i=="/"&&!s)return;i=="["?s=!0:s&&i==r&&(s=!1)}t=!t&&i=="\\"}}function et(e,t,n){return mr=e,gr=n,t}function tt(e,t){var n=e.next();if(n=='"'||n=="'")return t[i]=nt(n),t[i](e,t);if(n=="."&&e[s](/^\d+(?:[eE][+\-]?\d+)?/))return et(o,o);if(n=="."&&e[s](".."))return et(u,"meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return et(n);if(n=="="&&e.eat(">"))return et(a,f);if(n=="0"&&e.eat(/x/i))return e[l](/[\da-f]/i),et(o,o);if(/\d/.test(n))return e[s](/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),et(o,o);if(n=="/")return e.eat("*")?(t[i]=rt,rt(e,t)):e.eat("/")?(e.skipToEnd(),et(c,c)):t[h]==f||t[h]==p||t[h]=="sof"||/^[\[{}\(,;:]$/.test(t[h])?(Z(e),e[l](/[gimy]/),et("regexp",d)):(e[l](dr),et(f,f,e[v]()));if(n=="`")return t[i]=it,it(e,t);if(n=="#")return e.skipToEnd(),et("error","error");if(dr.test(n))return e[l](dr),et(f,f,e[v]());if(hr.test(n)){e[l](hr);var r=e[v](),g=pr.propertyIsEnumerable(r)&&pr[r];return g&&t[h]!="."?et(g.type,g.style,r):et(m,m,r)}}function nt(e){return function(t,r){var o=!1,u;if(fr&&t.peek()=="@"&&t[s](vr))return r[i]=tt,et(g,"meta");while((u=t.next())!=n){if(u==e&&!o)break;o=!o&&u=="\\"}return o||(r[i]=tt),et(y,y)}}function rt(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t[i]=tt;break}n=r=="*"}return et(c,c)}function it(e,t){var r=!1,s;while((s=e.next())!=n){if(!r&&(s=="`"||s=="$"&&e.eat(b))){t[i]=tt;break}r=!r&&s=="\\"}return et(w,d,e[v]())}function st(e,t){t[E]&&(t[E]=n);var r=e[y].indexOf(a,e.start);if(r<0)return;var i=0,s=!1;for(var o=r-1;o>=0;--o){var u=e[y].charAt(o),f=yr.indexOf(u);if(f>=0&&f<3){if(!i){++o;break}if(--i==0)break}else if(f>=3&&f<6)++i;else if(hr.test(u))s=!0;else if(s&&!i){++o;break}}s&&!i&&(t[E]=o)}function ot(e,t,r,i,s,o){this[S]=e,this.column=t,this.type=r,this.prev=s,this.info=o,i!=n&&(this[x]=i)}function ut(e,t){for(var n=e[T];n;n=n.next)if(n.name==t)return!0;for(var r=e[N];r;r=r.prev)for(var n=r.vars;n;n=n.next)if(n.name==t)return!0}function at(e,t,r,i,s){var o=e.cc;wr[C]=e,wr[k]=s,wr[L]=n,wr.cc=o,wr.style=t,e[O][A](x)||(e[O][x]=!0);for(;;){var u=o[M]?o.pop():lr?yt:gt;if(u(r,i)){while(o[M]&&o[o[M]-1].lex)o.pop()();return wr[L]?wr[L]:r==m&&ut(e,i)?"variable-2":t}}}function ft(){for(var e=arguments[M]-1;e>=0;e--)wr.cc.push(arguments[e])}function lt(){return ft.apply(n,arguments),!0}function ct(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var n=wr[C];if(n[N]){wr[L]="def";if(t(n[T]))return;n[T]={name:e,next:n[T]}}else{if(t(n[_]))return;Y[_]&&(n[_]={name:e,next:n[_]})}}function ht(){wr[C][N]={prev:wr[C][N],vars:wr[C][T]},wr[C][T]=Er}function pt(){wr[C][T]=wr[C][N].vars,wr[C][N]=wr[C][N].prev}function dt(e,t){var r=function(){var r=wr[C],i=r[S];if(r[O].type==D)i=r[O][S];else for(var s=r[O];s&&s.type==P&&s[x];s=s.prev)i=s[S];r[O]=new ot(i,wr[k].column(),e,n,r[O],t)};return r.lex=!0,r}function vt(){var e=wr[C];e[O].prev&&(e[O].type==P&&(e[S]=e[O][S]),e[O]=e[O].prev)}function mt(e){function t(n){return n==e?lt():e==H?ft():lt(t)}return t}function gt(e,t){return e==B?lt(dt("vardef",t[M]),Bn,mt(H),vt):e==j?lt(dt(F),yt,gt,vt):e==I?lt(dt(F),gt,vt):e==b?lt(dt(q),Dn,vt):e==H?lt():e=="if"?(wr[C][O].info==R&&wr[C].cc[wr[C].cc[M]-1]==vt&&wr[C].cc.pop()(),lt(dt(F),yt,gt,vt,Rn)):e==U?lt($n):e==z?lt(dt(F),Un,gt,vt):e==m?lt(dt(D),Cn):e==W?lt(dt(F),yt,dt(q,W),mt(b),Dn,vt,vt):e=="case"?lt(yt,mt(":")):e==X?lt(mt(":")):e=="catch"?lt(dt(F),ht,mt("("),Jn,mt(P),gt,vt,pt):e=="module"?lt(dt(F),ht,Zn,pt,vt):e=="class"?lt(dt(F),Kn,vt):e=="export"?lt(dt(F),er,vt):e=="import"?lt(dt(F),tr,vt):ft(dt(D),yt,mt(H),vt)}function yt(e){return wt(e,!1)}function bt(e){return wt(e,!0)}function wt(e,t){if(wr[C][E]==wr[k].start){var i=t?Lt:kt;if(e=="(")return lt(ht,dt(P),Mn(jn,P),vt,mt(a),i,pt);if(e==m)return ft(ht,jn,mt(a),i,pt)}var s=t?Tt:xt;return br[A](e)?lt(s):e==U?lt($n,s):e==p?lt(t?St:Et):e=="("?lt(dt(P),Et,or,mt(P),vt,s):e==f||e==u?lt(t?bt:yt):e=="["?lt(dt(r),ir,vt,s):e==b?_n(Ln,q,n,s):e==w?ft(Nt,s):lt()}function Et(e){return e[s](/[;\}\)\],]/)?ft():ft(yt)}function St(e){return e[s](/[;\}\)\],]/)?ft():ft(bt)}function xt(e,t){return e==","?lt(yt):Tt(e,t,!1)}function Tt(e,t,n){var i=n==0?xt:Tt,s=n==0?yt:bt;if(e==a)return lt(ht,n?Lt:kt,pt);if(e==f)return/\+\+|--/.test(t)?lt(i):t=="?"?lt(yt,mt(":"),s):lt(s);if(e==w)return ft(Nt,i);if(e==H)return;if(e=="(")return _n(bt,P,"call",i);if(e==".")return lt(kn,i);if(e=="[")return lt(dt(r),Et,mt(r),vt,i)}function Nt(e,t){return e!=w?ft():t.slice(t[M]-2)!="${"?lt(Nt):lt(yt,Ct)}function Ct(e){if(e==q)return wr[L]=d,wr[C][i]=it,lt(Nt)}function kt(e){return st(wr[k],wr[C]),ft(e==b?gt:yt)}function Lt(e){return st(wr[k],wr[C]),ft(e==b?gt:bt)}function Cn(e){return e==":"?lt(vt,gt):ft(xt,mt(H),vt)}function kn(e){if(e==m)return wr[L]=V,lt()}function Ln(e,t){if(e==m||wr.style==$)return wr[L]=V,t=="get"||t=="set"?lt(An):lt(On);if(e==o||e==y)return wr[L]=fr?V:wr.style+" property",lt(On);if(e==g)return lt(On);if(e=="[")return lt(yt,mt(r),On)}function An(e){return e!=m?ft(On):(wr[L]=V,lt($n))}function On(e){if(e==":")return lt(bt);if(e=="(")return ft($n)}function Mn(e,t){function n(r){if(r==","){var i=wr[C][O];return i.info=="call"&&(i.pos=(i.pos||0)+1),lt(e,n)}return r==t?lt():lt(mt(t))}return function(r){return r==t?lt():ft(e,n)}}function _n(e,t,n){for(var r=3;r<arguments[M];r++)wr.cc.push(arguments[r]);return lt(dt(t,n),Mn(e,t),vt)}function Dn(e){return e==q?lt():ft(gt,Dn)}function Pn(e){if(cr&&e==":")return lt(Hn)}function Hn(e){if(e==m)return wr[L]=J,lt()}function Bn(){return ft(jn,Pn,In,qn)}function jn(e,t){if(e==m)return ct(t),lt();if(e=="[")return _n(jn,r);if(e==b)return _n(Fn,q)}function Fn(e,t){return e==m&&!wr[k][s](/^\s*:/,!1)?(ct(t),lt(In)):(e==m&&(wr[L]=V),lt(mt(":"),jn,In))}function In(e,t){if(t=="=")return lt(bt)}function qn(e){if(e==",")return lt(Bn)}function Rn(e,t){if(e==I&&t==R)return lt(dt(F,R),gt,vt)}function Un(e){if(e=="(")return lt(dt(P),zn,mt(P),vt)}function zn(e){return e==B?lt(Bn,mt(H),Xn):e==H?lt(Xn):e==m?lt(Wn):ft(yt,mt(H),Xn)}function Wn(e,t){return t=="in"||t=="of"?(wr[L]=$,lt(yt)):lt(xt,Xn)}function Xn(e,t){return e==H?lt(Vn):t=="in"||t=="of"?(wr[L]=$,lt(yt)):ft(yt,mt(H),Vn)}function Vn(e){e!=P&&lt(yt)}function $n(e,t){if(t=="*")return wr[L]=$,lt($n);if(e==m)return ct(t),lt($n);if(e=="(")return lt(ht,dt(P),Mn(Jn,P),vt,gt,pt)}function Jn(e){return e==u?lt(Jn):ft(jn,Pn)}function Kn(e,t){if(e==m)return ct(t),lt(Qn)}function Qn(e,t){if(t==K)return lt(yt,Qn);if(e==b)return lt(dt(q),Gn,vt)}function Gn(e,t){if(e==m||wr.style==$)return wr[L]=V,t=="get"||t=="set"?lt(Yn,$n,Gn):lt($n,Gn);if(t=="*")return wr[L]=$,lt(Gn);if(e==H)return lt(Gn);if(e==q)return lt()}function Yn(e){return e!=m?ft():(wr[L]=V,lt())}function Zn(e,t){if(e==y)return lt(gt);if(e==m)return ct(t),lt(rr)}function er(e,t){return t=="*"?(wr[L]=$,lt(rr,mt(H))):t==X?(wr[L]=$,lt(yt,mt(H))):ft(gt)}function tr(e){return e==y?lt():ft(nr,rr)}function nr(e,t){return e==b?_n(nr,q):(e==m&&ct(t),lt())}function rr(e,t){if(t=="from")return wr[L]=$,lt(yt)}function ir(e){return e==r?lt():ft(bt,sr)}function sr(e){return e==z?ft(or,mt(r)):e==","?lt(Mn(St,r)):ft(Mn(bt,r))}function or(e){if(e==z)return lt(Un,or);if(e=="if")return lt(yt,or)}var ur=G.indentUnit,ar=Y.statementIndent,fr=Y.jsonld,lr=Y.json||fr,cr=Y.typescript,hr=Y.wordCharacters||/[\w$\xa1-\uffff]/,pr=function(){function e(e){return{type:e,style:$}}var t=e(j),n=e(I),r=e(p),i=e(f),s={type:Q,style:Q},o={"if":e("if"),"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"debugger":r,"var":e(B),"const":e(B),let:e(B),"function":e(U),"catch":e("catch"),"for":e(z),"switch":e(W),"case":e("case"),"default":e(X),"in":i,"typeof":i,"instanceof":i,"true":s,"false":s,"null":s,"undefined":s,NaN:s,Infinity:s,"this":e("this"),module:e("module"),"class":e("class"),"super":e(Q),yield:r,"export":e("export"),"import":e("import"),"extends":r};if(cr){var u={type:m,style:J},a={"interface":e("interface"),"extends":e(K),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:u,number:u,bool:u,any:u};for(var l in a)o[l]=a[l]}return o}(),dr=/[+\-*&%=<>!?|~^]/,vr=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,mr,gr,yr="([{}])",br={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},wr={state:n,column:n,marked:n,cc:n},Er={name:"this",next:{name:"arguments"}};return vt.lex=!0,{startState:function(e){var t={tokenize:tt,lastType:"sof",cc:[],lexical:new ot((e||0)-ur,0,"block",!1),localVars:Y[T],context:Y[T]&&{vars:Y[T]},indented:0};return Y[_]&&typeof Y[_]=="object"&&(t[_]=Y[_]),t},token:function(e,t){e.sol()&&(t[O][A](x)||(t[O][x]=!1),t[S]=e.indentation(),st(e,t));if(t[i]!=rt&&e.eatSpace())return n;var r=t[i](e,t);return mr==c?r:(t[h]=mr!=f||gr!="++"&&gr!="--"?mr:"incdec",at(t,r,mr,gr,e))},indent:function(t,n){if(t[i]==rt)return e.Pass;if(t[i]!=tt)return 0;var r=n&&n.charAt(0),s=t[O];if(!/^\s*else\b/.test(n))for(var o=t.cc[M]-1;o>=0;--o){var u=t.cc[o];if(u==vt)s=s.prev;else if(u!=Rn)break}s.type==D&&r==q&&(s=s.prev),ar&&s.type==P&&s.prev.type==D&&(s=s.prev);var a=s.type,l=r==a;return a=="vardef"?s[S]+(t[h]==f||t[h]==","?s.info+1:0):a==F&&r==b?s[S]:a==F?s[S]+ur:a==D?s[S]+(t[h]==f||t[h]==","?ar||ur:0):s.info==W&&!l&&Y.doubleIndentSwitch!=0?s[S]+(/^(?:case|default)\b/.test(n)?ur:2*ur):s[x]?s.column+(l?0:1):s[S]+(l?0:ur)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:lr?n:"/*",blockCommentEnd:lr?n:"*/",lineComment:lr?n:"//",fold:"brace",helperType:lr?"json":t,jsonldMode:fr,jsonMode:lr}}),e.registerHelper("wordChars",t,/[\w$]/),e[G]("text/javascript",t),e[G]("text/ecmascript",t),e[G]("application/javascript",t),e[G]("application/x-javascript",t),e[G]("application/ecmascript",t),e[G]("application/json",{name:t,json:!0}),e[G]("application/x-json",{name:t,json:!0}),e[G]("application/ld+json",{name:t,jsonld:!0}),e[G]("text/typescript",{name:t,typescript:!0}),e[G]("application/typescript",{name:t,typescript:!0})}),function(e){var t="object",n="../../lib/codemirror";typeof exports==t&&typeof module==t?e(require(n)):typeof define=="function"&&define.amd?define("codemirror/mode/css/css",[n],e):e(CodeMirror)}(function(e){function lt(e){var t={};for(var n=0;n<e.length;++n)t[e[n]]=!0;return t}function ct(e,t){var r=!1,i;while((i=e.next())!=f){if(r&&i=="/"){t[n]=f;break}r=i=="*"}return[s,s]}function ht(e,t){return e.skipTo("-->")?(e[l]("-->"),t[n]=f):e[I](),[s,s]}var t="interpolation",n="tokenize",r="hasOwnProperty",i="context",s="comment",o="word",u="property",a="maybeprop",f=null,l="match",c="variable-definition",h="variable",p="block",d="variable-2",v="searchfield-results-decoration",m="eatWhile",g="type",y="parens",b="searchfield-results-button",w="toLowerCase",E="searchfield-cancel-button",S="font_face",x="operator",T="current",N="hash",C="searchfield-decoration",k="qualifier",L="media_parens",A="font-feature-settings",O="top",M="keyword",_="css",D="dominant-baseline",P="atom",H="keyframes",B="image-rendering",j="error",F="baseline-shift",I="skipToEnd",q="font_face_before",R="{",U="font-variant",z="shape-inside",W="meta",X="font-stretch",V="defineMIME",$="}",J="font-weight",K="font-family",Q="max-height",G="min-height",Y="background",Z="propertyKeywords",et="font-style",tt="concat",nt="max-width",rt="min-width",it="prop",st="media",ot="text/css",ut="content",at="builtin",ft="padding";e.defineMode(_,function(s,d){function v(e,t){return et=t,e}function b(e,t){var r=e.next();if(U[r]){var i=U[r](e,t);if(i!==!1)return i}if(r=="@")return e[m](/[\w\\\-]/),v("def",e[T]());if(r=="="||(r=="~"||r=="|")&&e.eat("="))return v(f,"compare");if(r=='"'||r=="'")return t[n]=E(r),t[n](e,t);if(r=="#")return e[m](/[\w\\\-]/),v(P,N);if(r=="!")return e[l](/^\s*\w*/),v(M,"important");if(/\d/.test(r)||r=="."&&e.eat(/\d/))return e[m](/[\w.%]/),v("number","unit");if(r!=="-")return/[,+>*\/]/.test(r)?v(f,"select-op"):r=="."&&e[l](/^-?[_a-z][_a-z0-9-]*/i)?v(k,k):/[:;{}\[\]\(\)]/.test(r)?v(f,r):r=="u"&&e[l]("rl(")?(e.backUp(1),t[n]=x,v(u,o)):/[\w\\\-]/.test(r)?(e[m](/[\w\\\-]/),v(u,o)):v(f,f);if(/[\d.]/.test(e.peek()))return e[m](/[\w.%]/),v("number","unit");if(e[l](/^\w+-/))return v(W,W)}function E(e){return function(t,r){var i=!1,s;while((s=t.next())!=f){if(s==e&&!i){e==")"&&t.backUp(1);break}i=!i&&s=="\\"}if(s==e||!i&&e!=")")r[n]=f;return v("string","string")}}function x(e,t){return e.next(),e[l](/\s*[\"\')]/,!1)?t[n]=f:t[n]=E(")"),v(f,"(")}function C(e,t,n){this[g]=e,this.indent=t,this.prev=n}function A(e,t,n){return e[i]=new C(n,t.indentation()+I,e[i]),n}function _(e){return e[i]=e[i].prev,e[i][g]}function D(e,t,n){return nt[n[i][g]](e,t,n)}function B(e,t,n,r){for(var s=r||1;s>0;s--)n[i]=n[i].prev;return D(e,t,n)}function F(e){var t=e[T]()[w]();Q[r](t)?tt=P:K[r](t)?tt=M:tt=h}d[Z]||(d=e.resolveMode(ot));var I=s.indentUnit,U=d.tokenHooks,z=d.mediaTypes||{},X=d.mediaFeatures||{},V=d[Z]||{},J=d.nonStandardPropertyKeywords||{},K=d.colorKeywords||{},Q=d.valueKeywords||{},G=d.fontProperties||{},Y=d.allowNested,et,tt,nt={};return nt[O]=function(e,n,r){if(e==R)return A(r,n,p);if(e==$&&r[i].prev)return _(r);if(e=="@media")return A(r,n,st);if(e=="@font-face")return q;if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return H;if(e&&e.charAt(0)=="@")return A(r,n,"at");if(e==N)tt=at;else if(e==o)tt="tag";else{if(e==c)return a;if(e==t)return A(r,n,t);if(e==":")return"pseudo";if(Y&&e=="(")return A(r,n,y)}return r[i][g]},nt[p]=function(e,t,n){if(e==o){var i=t[T]()[w]();return V[r](i)?(tt=u,a):J[r](i)?(tt="string-2",a):Y?(tt=t[l](/^\s*:/,!1)?u:"tag",p):(tt+=" error",a)}return e==W?p:!!Y||e!=N&&e!=k?nt[O](e,t,n):(tt=j,p)},nt[a]=function(e,t,n){return e==":"?A(n,t,it):D(e,t,n)},nt[it]=function(e,n,r){if(e==";")return _(r);if(e==R&&Y)return A(r,n,"propBlock");if(e==$||e==R)return B(e,n,r);if(e=="(")return A(r,n,y);if(e==N&&!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(n[T]()))tt+=" error";else if(e==o)F(n);else if(e==t)return A(r,n,t);return it},nt.propBlock=function(e,t,n){return e==$?_(n):e==o?(tt=u,a):n[i][g]},nt[y]=function(e,t,n){return e==R||e==$?B(e,t,n):e==")"?_(n):e=="("?A(n,t,y):(e==o&&F(t),y)},nt.pseudo=function(e,t,n){return e==o?(tt="variable-3",n[i][g]):D(e,t,n)},nt[st]=function(e,t,n){if(e=="(")return A(n,t,L);if(e==$)return B(e,t,n);if(e==R)return _(n)&&A(n,t,Y?p:O);if(e==o){var s=t[T]()[w]();s=="only"||s=="not"||s=="and"?tt=M:z[r](s)?tt="attribute":X[r](s)?tt=u:tt=j}return n[i][g]},nt[L]=function(e,t,n){return e==")"?_(n):e==R||e==$?B(e,t,n,2):nt[st](e,t,n)},nt[q]=function(e,t,n){return e==R?A(n,t,S):D(e,t,n)},nt[S]=function(e,t,n){return e==$?_(n):e==o?(G[r](t[T]()[w]())?tt=u:tt=j,a):S},nt[H]=function(e,t,n){return e==o?(tt=h,H):e==R?A(n,t,O):D(e,t,n)},nt.at=function(e,t,n){return e==";"?_(n):e==R||e==$?B(e,t,n):(e==o?tt="tag":e==N&&(tt=at),"at")},nt[t]=function(e,n,r){return e==$?_(r):e==R||e==";"?B(e,n,r):(e!=h&&(tt=j),t)},{startState:function(e){return{tokenize:f,state:O,context:new C(O,e||0,f)}},token:function(e,t){if(!t[n]&&e.eatSpace())return f;var r=(t[n]||b)(e,t);return r&&typeof r=="object"&&(et=r[1],r=r[0]),tt=r,t.state=nt[t.state](et,e,t),tt},indent:function(e,n){var r=e[i],s=n&&n.charAt(0),o=r.indent;return r[g]==it&&(s==$||s==")")&&(r=r.prev),r.prev&&(s==$&&(r[g]==p||r[g]==O||r[g]==t||r[g]==S)||s==")"&&(r[g]==y||r[g]==L)||s==R&&(r[g]=="at"||r[g]==st))&&(o=r.indent-I,r=r.prev),o},electricChars:$,blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var pt=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],dt=lt(pt),vt=["width",rt,nt,"height",G,Q,"device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],mt=lt(vt),gt=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility",Y,"background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size",F,"binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width"
,"border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns",ut,"counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display",D,"drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font",A,K,"font-kerning","font-language-override","font-size","font-size-adjust",X,et,"font-synthesis",U,"font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position",J,"grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation",B,"image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style",Q,nt,G,rt,"move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y",ft,"padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold",z,"shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap",O,"transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule",B,"marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering",F,D,"glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],yt=lt(gt),bt=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color",z,E,C,b,v,"zoom"],wt=lt(bt),Et=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],St=lt(Et),xt=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region",Y,"backwards","baseline","below","bidi-override","binary","bengali","blink",p,"block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain",ut,"content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam",l,"media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline",ft,"padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield",E,C,b,v,"semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to",O,"transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],Tt=lt(xt),Nt=[K,"src","unicode-range",U,A,X,J,et],Ct=lt(Nt),kt=pt[tt](vt)[tt](gt)[tt](bt)[tt](Et)[tt](xt);e.registerHelper("hintWords",_,kt),e[V](ot,{mediaTypes:dt,mediaFeatures:mt,propertyKeywords:yt,nonStandardPropertyKeywords:wt,colorKeywords:St,valueKeywords:Tt,fontProperties:Ct,tokenHooks:{"<":function(e,t){return e[l]("!--")?(t[n]=ht,ht(e,t)):!1},"/":function(e,t){return e.eat("*")?(t[n]=ct,ct(e,t)):!1}},name:_}),e[V]("text/x-scss",{mediaTypes:dt,mediaFeatures:mt,propertyKeywords:yt,nonStandardPropertyKeywords:wt,colorKeywords:St,valueKeywords:Tt,fontProperties:Ct,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e[I](),[s,s]):e.eat("*")?(t[n]=ct,ct(e,t)):[x,x]},":":function(e){return e[l](/\s*\{/)?[f,R]:!1},$:function(e){return e[l](/^[\w-]+/),e[l](/^\s*:/,!1)?[d,c]:[d,h]},"#":function(e){return e.eat(R)?[f,t]:!1}},name:_,helperType:"scss"}),e[V]("text/x-less",{mediaTypes:dt,mediaFeatures:mt,propertyKeywords:yt,nonStandardPropertyKeywords:wt,colorKeywords:St,valueKeywords:Tt,fontProperties:Ct,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e[I](),[s,s]):e.eat("*")?(t[n]=ct,ct(e,t)):[x,x]},"@":function(e){return e[l](/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)?!1:(e[m](/[\w\\\-]/),e[l](/^\s*:/,!1)?[d,c]:[d,h])},"&":function(){return[P,P]}},name:_,helperType:"less"})}),function(e){var t="object",n="../../lib/codemirror",r="../xml/xml",i="../javascript/javascript",s="../css/css";typeof exports==t&&typeof module==t?e(require(n),require(r),require(i),require(s)):typeof define=="function"&&define.amd?define("codemirror/mode/htmlmixed/htmlmixed",[n,r,i,s],e):e(CodeMirror)}(function(e){var t="htmlmixed",n="htmlState",r="token",i="test",s="current",o="match",u="length",a="matches",f="mode",l="localMode",c="localState",h="startState",p="indent",d=null,v="getMode",m="javascript";e.defineMode(t,function(t,A){function O(e,t){var d=t[n].tagName;d&&(d=d.toLowerCase());var v=P[r](e,t[n]);if(d=="script"&&/\btag\b/[i](v)&&e[s]()==">"){var m=e.string.slice(Math.max(0,e.pos-100),e.pos)[o](/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);m=m?m[1]:"",m&&/[\"\']/[i](m.charAt(0))&&(m=m.slice(1,m[u]-1));for(var C=0;C<B[u];++C){var k=B[C];if(typeof k[a]=="string"?m==k[a]:k[a][i](m)){k[f]&&(t[r]=_,t[l]=k[f],t[c]=k[f][h]&&k[f][h](P[p](t[n],"")));break}}}else d=="style"&&/\btag\b/[i](v)&&e[s]()==">"&&(t[r]=D,t[l]=H,t[c]=H[h](P[p](t[n],"")));return v}function M(e,t,n){var r=e[s](),i=r.search(t),a;if(i>-1)e.backUp(r[u]-i);else if(a=r[o](/<\/?$/))e.backUp(r[u]),e[o](t,!1)||e[o](r);return n}function _(e,t){return e[o](/^<\/\s*script\s*>/i,!1)?(t[r]=O,t[c]=t[l]=d,O(e,t)):M(e,/<\/\s*script\s*>/,t[l][r](e,t[c]))}function D(e,t){return e[o](/^<\/\s*style\s*>/i,!1)?(t[r]=O,t[c]=t[l]=d,O(e,t)):M(e,/<\/\s*style\s*>/,H[r](e,t[c]))}var P=e[v](t,{name:"xml",htmlMode:!0,multilineTagIndentFactor:A.multilineTagIndentFactor,multilineTagIndentPastTag:A.multilineTagIndentPastTag}),H=e[v](t,"css"),B=[],j=A&&A.scriptTypes;B.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:e[v](t,m)});if(j)for(var F=0;F<j[u];++F){var I=j[F];B.push({matches:I[a],mode:I[f]&&e[v](t,I[f])})}return B.push({matches:/./,mode:e[v](t,"text/plain")}),{startState:function(){var e=P[h]();return{token:O,localMode:d,localState:d,htmlState:e}},copyState:function(t){if(t[c])var i=e.copyState(t[l],t[c]);return{token:t[r],localMode:t[l],localState:i,htmlState:e.copyState(P,t[n])}},token:function(e,t){return t[r](e,t)},indent:function(t,r){return!t[l]||/^\s*<\//[i](r)?P[p](t[n],r):t[l][p]?t[l][p](t[c],r):e.Pass},innerMode:function(e){return{state:e[c]||e[n],mode:e[l]||P}}}},"xml",m,"css"),e.defineMIME("text/html",t)}),function(e){var t="object",n="../../lib/codemirror";typeof exports==t&&typeof module==t?e(require(n)):typeof define=="function"&&define.amd?define("codemirror/addon/hint/show-hint",[n],e):e(CodeMirror)}(function(e){function U(e,n){this.cm=e,this[t]=this.buildOptions(n),this[a]=this[D]=h}function z(e){return typeof e==T?e:e.text}function W(e,n){function i(e,t){var r;typeof t!=T?r=function(e){return t(e,n)}:s[v](t)?r=s[t]:r=t,u[e]=r}var s={Up:function(){n[w](-1)},Down:function(){n[w](1)},PageUp:function(){n[w](-n.menuSize()+1,!0)},PageDown:function(){n[w](n.menuSize()-1,!0)},Home:function(){n.setFocus(0)},End:function(){n.setFocus(n[r]-1)},Enter:n[C],Tab:n[C],Esc:n[f]},o=e[t].customKeys,u=o?{}:s;if(o)for(var a in o)o[v](a)&&i(a,o[a]);var l=e[t].extraKeys;if(l)for(var a in l)l[v](a)&&i(a,l[a]);return u}function X(e,t){while(t&&t!=e){if(t.nodeName.toUpperCase()==="LI"&&t[L]==e)return t;t=t[L]}}function V(i,a){this[s]=i,this.data=a;var v=this,b=i.cm,w=this[l]=document[B]("ul");w[u]="CodeMirror-hints",this[n]=a[n]||0;var T=a.list;for(var k=0;k<T[r];++k){var L=w[N](document[B]("li")),M=T[k],_=$+(k!=this[n]?"":" "+J);M[u]!=h&&(_=M[u]+" "+_),L[u]=_,M.render?M.render(L,a,M):L[N](document.createTextNode(M.displayText||z(M))),L[A]=k}var D=b.cursorCoords(i[t].alignWithWord?a.from:h),P=D[y],H=D[E],F=!0;w[O][y]=P+x,w[O].top=H+x;var I=window.innerWidth||Math.max(document.body.offsetWidth,document[m].offsetWidth),U=window.innerHeight||Math.max(document.body[o],document[m][o]);(i[t].container||document.body)[N](w);var V=w[c](),K=V[E]-U;if(K>0){var Z=V[E]-V.top,nt=D.top-(D[E]-V.top);if(nt-Z>0)w[O].top=(H=D.top-Z)+x,F=!1;else if(Z>U){w[O].height=U-5+x,w[O].top=(H=D[E]-V.top)+x;var rt=b[p]();a.from.ch!=rt.ch&&(D=b.cursorCoords(rt),w[O][y]=(P=D[y])+x,V=w[c]())}}var ot=V[y]-I;ot>0&&(V.right-V[y]>I&&(w[O].width=I-5+x,ot-=V.right-V[y]-I),w[O][y]=(P=D[y]-ot)+x),b.addKeyMap(this.keyMap=W(i,{moveFocus:function(e,t){v[d](v[n]+e,t)},setFocus:function(e){v[d](e)},menuSize:function(){return v.screenAmount()},length:T[r],close:function(){i[f]()},pick:function(){v[C]()},data:a}));if(i[t][j]){var ut;b.on("blur",this.onBlur=function(){ut=setTimeout(function(){i[f]()},100)}),b.on(q,this.onFocus=function(){clearTimeout(ut)})}var at=b[R]();return b.on("scroll",this.onScroll=function(){var e=b[R](),t=b.getWrapperElement()[c](),n=H+at.top-e.top,r=n-(window.pageYOffset||(document[m]||document.body)[g]);F||(r+=w[o]);if(r<=t.top||r>=t[E])return i[f]();w[O].top=n+x,w[O][y]=P+at[y]-e[y]+x}),e.on(w,"dblclick",function(e){var t=X(w,e.target||e.srcElement);t&&t[A]!=h&&(v[d](t[A]),v[C]())}),e.on(w,"click",function(e){var n=X(w,e.target||e.srcElement);n&&n[A]!=h&&(v[d](n[A]),i[t].completeOnSingleClick&&v[C]())}),e.on(w,"mousedown",function(){setTimeout(function(){b[q]()},20)}),e[S](a,"select",T[0],w.firstChild),!0}var t="options",n="selectedHint",r="length",i="completionActive",s="completion",o="offsetHeight",u="className",a="widget",f="close",l="hints",c="getBoundingClientRect",h=null,p="getCursor",d="changeActive",v="hasOwnProperty",m="documentElement",g="scrollTop",y="left",b="showHint",w="moveFocus",E="bottom",S="signal",x="px",T="string",N="appendChild",C="pick",k="hint",L="parentNode",A="hintId",O="style",M="offsetTop",_="clientHeight",D="onClose",P="cursorActivity",H="somethingSelected",B="createElement",j="closeOnUnfocus",F="registerHelper",I="hintOptions",q="focus",R="getScrollInfo",$="CodeMirror-hint",J="CodeMirror-hint-active";e[b]=function(e,t,n){if(!t)return e[b](n);n&&n.async&&(t.async=!0);var r={hint:t};if(n)for(var i in n)r[i]=n[i];return e[b](r)},e.defineExtension(b,function(n){if(this.listSelections()[r]>1||this[H]())return;this.state[i]&&this.state[i][f]();var s=this.state[i]=new U(this,n),o=s[t][k];if(!o)return;e[S](this,"startCompletion",this);if(!o.async)return s.showHints(o(this,s[t]));o(this,function(e){s.showHints(e)},s[t])}),U.prototype={close:function(){if(!this.active())return;this.cm.state[i]=h,this[a]&&this[a][f](),this[D]&&this[D](),e[S](this.cm,"endCompletion",this.cm)},active:function(){return this.cm.state[i]==this},pick:function(t,n){var r=t.list[n];r[k]?r[k](this.cm,t,r):this.cm.replaceRange(z(r),r.from||t.from,r.to||t.to,"complete"),e[S](t,C,r),this[f]()},showHints:function(e){if(!e||!e.list[r]||!this.active())return this[f]();this[t].completeSingle&&e.list[r]==1?this[C](e,0):this.showWidget(e)},showWidget:function(n){function i(){if(d)return;d=!0,h[f](),h.cm.off(P,l),n&&e[S](n,f)}function s(){if(d)return;e[S](n,"update");var r=h[t][k];r.async?r(h.cm,o,h[t]):o(r(h.cm,h[t]))}function o(e){n=e;if(d)return;if(!n||!n.list[r])return i();h[a]&&h[a][f](),h[a]=new V(h,n)}function u(){c&&(b(c),c=0)}function l(){u();var e=h.cm[p](),t=h.cm.getLine(e.line);e.line!=m.line||t[r]-e.ch!=g-m.ch||e.ch<m.ch||h.cm[H]()||e.ch&&v.test(t.charAt(e.ch-1))?h[f]():(c=y(s),h[a]&&h[a][f]())}this[a]=new V(this,n),e[S](n,"shown");var c=0,h=this,d,v=this[t].closeCharacters,m=this.cm[p](),g=this.cm.getLine(m.line)[r],y=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},b=window.cancelAnimationFrame||clearTimeout;this.cm.on(P,l),this[D]=i},buildOptions:function(e){var n=this.cm[t][I],r={};for(var i in K)r[i]=K[i];if(n)for(var i in n)n[i]!==undefined&&(r[i]=n[i]);if(e)for(var i in e)e[i]!==undefined&&(r[i]=e[i]);return r}},V.prototype={close:function(){if(this[s][a]!=this)return;this[s][a]=h,this[l][L].removeChild(this[l]),this[s].cm.removeKeyMap(this.keyMap);var e=this[s].cm;this[s][t][j]&&(e.off("blur",this.onBlur),e.off(q,this.onFocus)),e.off("scroll",this.onScroll)},pick:function(){this[s][C](this.data,this[n])},changeActive:function(t,i){t>=this.data.list[r]?t=i?this.data.list[r]-1:0:t<0&&(t=i?0:this.data.list[r]-1);if(this[n]==t)return;var s=this[l].childNodes[this[n]];s[u]=s[u].replace(" "+J,""),s=this[l].childNodes[this[n]=t],s[u]+=" "+J,s[M]<this[l][g]?this[l][g]=s[M]-3:s[M]+s[o]>this[l][g]+this[l][_]&&(this[l][g]=s[M]+s[o]-this[l][_]+3),e[S](this.data,"select",this.data.list[this[n]],s)},screenAmount:function(){return Math.floor(this[l][_]/this[l].firstChild[o])||1}},e[F](k,"auto",function(t,n){var i=t.getHelpers(t[p](),k),s;if(i[r])for(var o=0;o<i[r];o++){var u=i[o](t,n);if(u&&u.list[r])return u}else if(s=t.getHelper(t[p](),"hintWords")){if(s)return e[k].fromList(t,{words:s})}else if(e[k].anyword)return e[k].anyword(t,n)}),e[F](k,"fromList",function(t,n){var i=t[p](),s=t.getTokenAt(i),o=[];for(var u=0;u<n.words[r];u++){var a=n.words[u];a.slice(0,s[T][r])==s[T]&&o.push(a)}if(o[r])return{list:o,from:e.Pos(i.line,s.start),to:e.Pos(i.line,s.end)}}),e.commands.autocomplete=e[b];var K={hint:e[k].auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!1,container:h,customKeys:h,extraKeys:h};e.defineOption(I,h)}),function(e){var t="object",n="../../lib/codemirror";typeof exports==t&&typeof module==t?e(require(n)):typeof define=="function"&&define.amd?define("codemirror/addon/lint/lint",[n],e):e(CodeMirror)}(function(e){function k(l,c){function h(i){if(!p[t])return e.off(document,n,h);p[r].top=Math.max(0,i.clientY-p.offsetHeight-5)+"px",p[r].left=i.clientX+5+"px"}var p=document[i](s);return p[o]="CodeMirror-lint-tooltip",p[u](c.cloneNode(!0)),document.body[u](p),e.on(document,n,h),h(l),p[r][a]!=f&&(p[r][a]=1),p}function L(e){e[t]&&e[t].removeChild(e)}function A(e){if(!e[t])return;e[r][a]==f&&L(e),e[r][a]=0,setTimeout(function(){L(e)},600)}function O(n,r,i){function s(){e.off(i,l,s),o&&(A(o),o=f)}var o=k(n,r),u=setInterval(function(){if(o)for(var e=i;;e=e[t]){if(e==document.body)return;if(!e){s();break}}if(!o)return clearInterval(u)},400);e.on(i,l,s)}function M(e,t,n){this[c]=[],this[h]=t,this[p]=f,this[d]=n,this[v]=function(t){U(e,t)}}function _(t,n){if(n instanceof Function)return{getAnnotations:n};if(!n||n===!0)n={};n[m]||(n[m]=t.getHelper(e.Pos(0,0),g));if(!n[m])throw new Error("Required option 'getAnnotations' missing (lint addon)");return n}function D(e){var t=e[y][g];t[d]&&e.clearGutter(z);for(var n=0;n<t[c][b];++n)t[c][n].clear();t[c][b]=0}function P(t,n,r,a){var f=document[i](s),l=f;return f[o]="CodeMirror-lint-marker-"+n,r&&(l=f[u](document[i](s)),l[o]="CodeMirror-lint-marker-multiple"),a!=0&&e.on(l,w,function(e){O(e,t,l)}),f}function H(e,t){return e==E?e:t}function B(e){var t=[];for(var n=0;n<e[b];++n){var r=e[n],i=r.from.line;(t[i]||(t[i]=[])).push(r)}return t}function j(e){var t=e.severity;t||(t=E);var n=document[i](s);return n[o]="CodeMirror-lint-message-"+t,n[u](document.createTextNode(e.message)),n}function F(e){var t=e[y][g],n=t[h],r=n[h]||n;n.async?n[m](e.getValue(),I,r,e):I(e,n[m](e.getValue(),r,e))}function I(e,t){D(e);var n=e[y][g],r=n[h],i=B(t);for(var s=0;s<i[b];++s){var o=i[s];if(!o)continue;var a=f,l=n[d]&&document.createDocumentFragment();for(var p=0;p<o[b];++p){var v=o[p],m=v.severity;m||(m=E),a=H(a,m),r[S]&&(v=r[S](v)),n[d]&&l[u](j(v)),v.to&&n[c].push(e.markText(v.from,v.to,{className:"CodeMirror-lint-mark-"+m,__annotation:v}))}n[d]&&e.setGutterMarker(s,z,P(l,a,o[b]>1,n[h].tooltips))}r[x]&&r[x](t,i,e)}function q(e){var t=e[y][g];clearTimeout(t[p]),t[p]=setTimeout(function(){F(e)},t[h].delay||500)}function R(e,t){var n=t.target||t[T];O(t,j(e),n)}function U(e,t){var n=t.target||t[T];if(!/\bCodeMirror-lint-mark-/.test(n[o]))return;var r=n.getBoundingClientRect(),i=(r.left+r.right)/2,s=(r.top+r.bottom)/2,u=e.findMarksAt(e.coordsChar({left:i,top:s},"client"));for(var a=0;a<u[b];++a){var f=u[a].__annotation;if(f)return R(f,t)}}var t="parentNode",n="mousemove",r="style",i="createElement",s="div",o="className",u="appendChild",a="opacity",f=null,l="mouseout",c="marked",h="options",p="timeout",d="hasGutter",v="onMouseOver",m="getAnnotations",g="lint",y="state",b="length",w="mouseover",E="error",S="formatAnnotation",x="onUpdateLinting",T="srcElement",N="change",C="getWrapperElement",z="CodeMirror-lint-markers";e.defineOption(g,!1,function(t,n,r){r&&r!=e.Init&&(D(t),t.off(N,q),e.off(t[C](),w,t[y][g][v]),delete t[y][g]);if(n){var i=t.getOption("gutters"),s=!1;for(var o=0;o<i[b];++o)i[o]==z&&(s=!0);var u=t[y][g]=new M(t,_(t,n),s);t.on(N,q),u[h].tooltips!=0&&e.on(t[C](),w,u[v]),F(t)}})}),function(e){var t="object",n="../../lib/codemirror";typeof exports==t&&typeof module==t?e(require(n)):typeof define=="function"&&define.amd?define("codemirror/addon/fold/foldcode",[n],e):e(CodeMirror)}(function(e){function d(a,f,l,c){function h(e){var o=p(a,f);if(!o||o.to.line-o.from.line<d)return t;var u=a[n](o.from);for(var l=0;l<u[r];++l)if(u[l].__isFold&&c!==i){if(!e)return t;o.cleared=!0,u[l][s]()}return o}if(l&&l.call){var p=l;l=t}else var p=m(a,l,"rangeFinder");typeof f=="number"&&(f=e.Pos(f,0));var d=m(a,l,"minFoldSize"),g=h(!0);if(m(a,l,"scanUp"))while(!g&&f.line>a[o]())f=e.Pos(f.line-1,0),g=h(!1);if(!g||g.cleared||c===u)return;var w=v(a,l);e.on(w,"mousedown",function(t){E[s](),e.e_preventDefault(t)});var E=a.markText(g.from,g.to,{replacedWith:w,clearOnEnter:!0,__isFold:!0});E.on(s,function(t,n){e.signal(a,u,a,t,n)}),e.signal(a,i,a,g.from,g.to)}function v(e,t){var n=m(e,t,"widget");if(typeof n=="string"){var r=document.createTextNode(n);n=document.createElement("span"),n.appendChild(r),n.className="CodeMirror-foldmarker"}return n}function m(e,t,n){if(t&&t[n]!==undefined)return t[n];var r=e.options[a];return r&&r[n]!==undefined?r[n]:g[n]}var t=null,n="findMarksAt",r="length",i="fold",s="clear",o="firstLine",u="unfold",a="foldOptions",f="defineExtension",l="foldCode",c="commands",h="getCursor",p="registerHelper";e.newFoldFunction=function(e,t){return function(n,r){d(n,r,{rangeFinder:e,widget:t})}},e[f](l,function(e,t,n){d(this,e,t,n)}),e[f]("isFolded",function(e){var t=this[n](e);for(var i=0;i<t[r];++i)if(t[i].__isFold)return!0}),e[c].toggleFold=function(e){e[l](e[h]())},e[c][i]=function(e){e[l](e[h](),t,i)},e[c][u]=function(e){e[l](e[h](),t,u)},e[c].foldAll=function(n){n.operation(function(){for(var r=n[o](),s=n.lastLine();r<=s;r++)n[l](e.Pos(r,0),t,i)})},e[c].unfoldAll=function(n){n.operation(function(){for(var r=n[o](),i=n.lastLine();r<=i;r++)n[l](e.Pos(r,0),t,u)})},e[p](i,"combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(t,n){for(var i=0;i<e[r];++i){var s=e[i](t,n);if(s)return s}}}),e[p](i,"auto",function(e,t){var n=e.getHelpers(t,i);for(var s=0;s<n[r];s++){var o=n[s](e,t);if(o)return o}});var g={rangeFinder:e[i].auto,widget:"↔",minFoldSize:0,scanUp:!1};e.defineOption(a,t)}),function(e){var t="object",n="../../lib/codemirror",r="./foldcode";typeof exports==t&&typeof module==t?e(require(n),require(r)):typeof define=="function"&&define.amd?define("codemirror/addon/fold/foldgutter",[n,r],e):e(CodeMirror)}(function(e){function y(e){this[t]=e,this[n]=this.to=0}function b(e){return e===!0&&(e={}),e[r]==i&&(e[r]="CodeMirror-foldgutter"),e[s]==i&&(e[s]="CodeMirror-foldgutter-open"),e[o]==i&&(e[o]="CodeMirror-foldgutter-folded"),e}function w(e,t){var r=e.findMarksAt(L(t));for(var i=0;i<r.length;++i)if(r[i].__isFold&&r[i].find()[n].line==t)return!0}function E(e){if(typeof e=="string"){var t=document.createElement("div");return t.className=e+" CodeMirror-guttermarker-subtle",t}return e.cloneNode(!0)}function S(c,h,p){var d=c[a][u][t],v=h;c.eachLine(h,p,function(t){var u=i;if(w(c,v))u=E(d[o]);else{var a=L(v,0),h=d[f]||e[l].auto,p=h&&h(c,a);p&&p[n].line+1<p.to.line&&(u=E(d[s]))}c.setGutterMarker(t,d[r],u),++v})}function x(e){var t=e[c](),r=e[a][u];if(!r)return;e.operation(function(){S(e,t[n],t.to)}),r[n]=t[n],r.to=t.to}function T(e,n,i){var s=e[a][u][t];if(i!=s[r])return;e.foldCode(L(n,0),s[f])}function N(e){var r=e[a][u],i=e[a][u][t];r[n]=r.to=0,clearTimeout(r[h]),r[h]=setTimeout(function(){x(e)},i.foldOnChangeTimeSpan||600)}function C(e){var r=e[a][u],i=e[a][u][t];clearTimeout(r[h]),r[h]=setTimeout(function(){var t=e[c]();r[n]==r.to||t[n]-r.to>20||r[n]-t.to>20?x(e):e.operation(function(){t[n]<r[n]&&(S(e,t[n],r[n]),r[n]=t[n]),t.to>r.to&&(S(e,r.to,t.to),r.to=t.to)})},i.updateViewportTimeSpan||400)}function k(e,t){var r=e[a][u],i=t.line;i>=r[n]&&i<r.to&&S(e,i,i+1)}var t="options",n="from",r="gutter",i=null,s="indicatorOpen",o="indicatorFolded",u="foldGutter",a="state",f="rangeFinder",l="fold",c="getViewport",h="changeUpdate",p="gutterClick",d="change",v="viewportChange",m="unfold",g="swapDoc";e.defineOption(u,!1,function(n,s,o){o&&o!=e.Init&&(n.clearGutter(n[a][u][t][r]),n[a][u]=i,n.off(p,T),n.off(d,N),n.off(v,C),n.off(l,k),n.off(m,k),n.off(g,x)),s&&(n[a][u]=new y(b(s)),x(n),n.on(p,T),n.on(d,N),n.on(v,C),n.on(l,k),n.on(m,k),n.on(g,x))});var L=e.Pos}),Array.indexOf||(Array.indexOf=[].indexOf?function(e,t,n){return e.indexOf(t,n)}:function(e,t,n){var r=e.length,i=n?parseInt(1*n+(n<0?r:0),10):0;i=i<0?0:i;for(;i<r;i++)if(i in e&&e[i]===t)return i;return-1}),function(e){var t="object",n="codemirror/lib/codemirror";typeof exports==t&&typeof module==t?e(require(n)):typeof define=="function"&&define.amd?define("easyAlgoSyntaxHighlighter",[n,"easyAlgoConfiguration","easyAlgoParser"],e):e(CodeMirror)}(function(e,t,n){function S(e){var t={},n=e.split(" ");for(var i=0;i<n[r];++i)t[n[i]]=!0;return t}function x(d,v){function m(e){if(e)for(var t in e)e.hasOwnProperty(t)&&g.push(t)}typeof d==i&&(d=[d]);var g=[];m(v.keywords),m(v.builtin),m(v.atoms);if(g[r]){v.helperType=d[0];var y="",b=undefined;e.registerHelper("hint",s,function(d,v){function m(e,t){var n=S[i].trim()[o]();if(n[r]>0&&e[u](n)==-1)return;Array[u](H,e)==-1&&(H.push(e),x.push({text:e,hint:function(e,n,o){var u=e.getMode({},s),c=e.getRange(w(E[a],0),w(E[a],S[f]));c.trim()[r]==0?S[f]=u.indent(S[l],o.text):S[i].trim()==0&&(S[f]+=1),e.replaceRange(o.text.toLowerCase()+(t?"()":""),w(E[a],S[f]),w(E[a],S.end),"complete")}}))}var w=e.Pos,E=d.getCursor(),S=d.getTokenAt(d.getCursor()),x=[],H=[];if(T[S[l][h][c]])for(var B in T[S[l][h][c]])m(T[S[l][h][c]][B]);for(var B in g)m(g[B]);var j=t.getFunctions();for(var B in j)m(B[o](),!0);var F=new n;if(y!=d[p]()){var I=F.parse(d[p]()),q=d.indexFromPos(E);y=d[p](),b=I[h]}var R=b.getContextFor(q),U=R.getAccessibleVars();for(var B in U)m(B);var z=R.getAccessibleFunctions();for(var B in z)m(B,!0);return{list:x,from:w(E[a],S[f]),to:w(E[a],S.end)}})}for(var w=0;w<d[r];++w)e.defineMIME(d[w],v)}var r="length",i="string",s="easyAlgo",o="toUpperCase",u="indexOf",a="line",f="start",l="state",c="blockName",h="context",p="getValue",d="tokenize",v="eatWhile",m="comment",g="propertyIsEnumerable",y=null,b="indented",w="align",E="statement";e.defineMode(s,function(e,t){function n(e,t){G=!1,Y=!1;var n=e.next();if(n=='"'||n=="'")return t[d]=a(n),t[d](e,t);if(/\d/.test(n))return e[v](/[\w\.\,]/),"number";if(n=="/"){if(e.eat("*"))return t[d]=f,f(e,t);if(e.eat("/"))return e.skipToEnd(),m}if(V.test(n))return e[v](V),"operator";e[v](/[\w\$_]/);var r=e.current();return r=r[o](),O[g](r)?(P[g](r)&&(G=!0),P[g](t[h][c])&&P[t[h][c]][u](r)>=0&&(Y=!0),"keyword"):z[g](r)?"atom":"variable"}function a(e){return function(t,n){var r=!1,s,o=!1;while((s=t.next())!=y){if(s==e&&!r){o=!0;break}r=!r&&s=="\\"}if(o||!r&&!X)n[d]=y;return i}}function f(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t[d]=y;break}n=r=="*"}return m}function l(e,t,n,r,i,s,o){this[b]=e,this.column=t,this.type=n,this[w]=r,this.prev=i,this[c]=s,this.vars=o||[]}function p(e,t,n,r){var i=e[b];return n==E&&(i=(e[h]?e[h][b]:0)+x),e[h]=new l(i,t,n,y,e[h],r)}function S(e){return e[h]=e[h].prev}var x=e.indentUnit,T=t.statementIndentUnit||x,A=t.dontAlignCalls,O=t.keywords||{},M=t.builtin||{},P=t.blockKeywords||{},z=
t.atoms||{},W=t.hooks||{},X=!0,V=/[+\-*&%=<>!?|\/]/,$="";for(var J in P)for(var K in P[J])$+=P[J][K]+"|";$=$.substring(0,$[r]-1);var Q=new RegExp($,"i"),G,Y;return{startState:function(e){return{tokenize:y,context:new l(0,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,t){var r=t[h];e.sol()&&(r[w]==y&&(r[w]=!1),t[b]=e.indentation(),t.startOfLine=!0);if(e.eatSpace())return y;var i=(t[d]||n)(e,t);return r[w]=r[w]||!0,Y&&S(t),G&&p(t,e.column(),E,e.current()[o]()),i},indent:function(e,t){var n=e[h][c]?e[h][c][o]():"",i=e[h][b],s=t[u](" ");s==-1&&(s=t[r]);var a=t.substring(0,s);return P[n]&&P[n][u](a[o]())>=0&&(i-=x,i<0&&(i=0)),i||0},electricInput:Q,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:s}});var T=t.getStartToEndBlock();x(["text/easyAlgo-src"],{name:s,keywords:S("LIRE ECRIRE SI SI_NON SI_NON_SI FIN_SI POUR DE A DANS PAR FIN_POUR TANT_QUE FIN_TANT_QUE DEFINIR ET OU DEFINIR_FONCTION FIN_FONCTION RETOURNER"),blockKeywords:T,atoms:S("NOMBRE CHAINE BOOLEEN TABLEAU VRAI FAUX VIDE")})}),define("easyAlgoValidator",["easyAlgoConfiguration","easyAlgoParser"],function(e,t){var n=function(e,n){var r=[];parsing=!0;var i=function(e,t,n,i){r.push({from:t,to:n,message:e,severity:i})};try{var s=new t,o=s.parse(e);for(var u in o.errors){var a=o.errors[u];console.log(a),i(a.toString(),a.getStart(),a.getEnd(),a.getSeverity())}}catch(f){console.log(f),r.push({from:CodeMirror.Pos(f.line-1,f.column-1),to:CodeMirror.Pos(f.line-1,f.column),message:f.message,severity:"error"})}return r};return{validate:function(e,t){return t=t==undefined?!0:t,n(e,t)}}}),function(e){var t="object",n="codemirror/lib/codemirror";typeof exports==t&&typeof module==t?e(require(n)):typeof define=="function"&&define.amd?define("easyAlgoLint",[n,"easyAlgoValidator"],e):e(CodeMirror)}(function(e,t){var n="number",r="posFromIndex",i=!1,s=undefined,o=undefined,u=function(e,t){s={cm:e,updateLinting:t}},a=function(e){i=!1;if(s){var t=s.cm,n=s.updateLinting;s=undefined,f(t,n)}else if(o){var r=o;o=undefined,r(e)}},f=function(e,i,s){var o=t.validate(s);for(var u in o){var f=o[u];typeof f.from==n&&(f.from=e[r](f.from)),typeof f.to==n&&(f.to=e[r](f.to))}i(e,o),a(o.length>0)};e.registerHelper("lint","easyAlgo",function(e,t,n,r){setTimeout(function(){f(r,t,e)},1)})}),function(e){var t="object",n="codemirror/lib/codemirror";typeof exports==t&&typeof module==t?e(require(n)):typeof define=="function"&&define.amd?define("easyAlgoFold",[n,"easyAlgoConfiguration"],e):e(CodeMirror)}(function(e,t){var n="getLine",r="toUpperCase",i=t.getStartToLastEndBlock();e.registerHelper("fold","easyAlgo",function(t,s){var o=t[n](s.line),u=o.trim().split(" ")[0][r]();if(!(u in i))return;var a=i[u],f=1,l=t.lastLine();for(var c=s.line+1;c<=l&&f>0;++c){var h=t[n](c).trim(),v=h.split(" "),m=v[0][r]();a.indexOf(m)>=0&&f--,m==u&&f++}c-=2;if(f==0)return{from:e.Pos(s.line,o.length),to:e.Pos(c,t[n](c).length)}})}),function(e){var t="object",n="codemirror/lib/codemirror";typeof exports==t&&typeof module==t?e(require(n)):typeof define=="function"&&define.amd?define("easyAlgoCloseTag",[n,"easyAlgoConfiguration"],e):e(CodeMirror)}(function(e,t){function T(e,t){var o=e[n](M(t[r],t.ch-1),M(t[r],t.ch+1));return o[i]==2?o:s}function N(t,n,i){var s=t[o](n[r]),u=t.getTokenAt(n);if(/\bstring2?\b/.test(u.type))return!1;var a=new e.StringStream(s.slice(0,n.ch)+i+s.slice(n.ch),4);a.pos=a.start=u.start;for(;;){var f=t.getMode().token(a,u.state);if(a.pos>=n.ch+1)return/\bstring2?\b/.test(f);a.start=a.pos}}function C(t){var S={name:u,Backspace:function(n){if(n[a](f))return e[l];var s=n[c]();for(var o=0;o<s[i];o++){if(!s[o].empty())return e[l];var u=T(n,s[o][h]);if(!u||t.indexOf(u)%2!=0)return e[l]}for(var o=s[i]-1;o>=0;o--){var p=s[o][h];n.replaceRange("",M(p[r],p.ch-1),M(p[r],p.ch+1))}}},x="";for(var C=0;C<t[i];C+=2)(function(t,u){t!=u&&(x+=u),S[p+t+p]=function(S){if(S[a](f))return e[l];var T=S[c](),C,k;for(var L=0;L<T[i];L++){var A=T[L],H=A[h],B,k=S[n](H,M(H[r],H.ch+1));if(!A.empty())B=d;else if(t==u&&k==u)S[n](H,M(H[r],H.ch+3))==t+t+t?B=v:B=m;else if(t==u&&H.ch>1&&S[n](M(H[r],H.ch-2),H)==t+t&&(H.ch<=2||S[n](M(H[r],H.ch-3),M(H[r],H.ch-2))!=t))B=g;else if(t=='"'||t==p){if(!!e.isWordChar(k)||!N(S,H,t))return e[l];B=y}else{if(!(S[o](H[r])[i]==H.ch||x.indexOf(k)>=0||O.test(k)))return e[l];B=y}if(!C)C=B;else if(C!=B)return e[l]}S.operation(function(){if(C==m)S[b](w);else if(C==v)for(var e=0;e<3;e++)S[b](w);else if(C==d){var n=S.getSelections();for(var e=0;e<n[i];e++)n[e]=t+n[e]+u;S.replaceSelections(n,"around")}else C==y?(S[E](t+u,s),S[b]("goCharLeft")):C==g&&(S[E](t+t+t+t,"before"),S[b](w))})},t!=u&&(S[p+u+p]=function(t){var s=t[c]();for(var o=0;o<s[i];o++){var a=s[o];if(!a.empty()||t[n](a[h],M(a[h][r],a[h].ch+1))!=u)return e[l]}t[b](w)})})(t.charAt(C),t.charAt(C+1));return S}function k(t,n){for(var u in n){var f=function(u,f){t[p+u+p]=function(t){var p=t[c]()[0],d=p[h][r],v=t[o](d),m=v.trim().split(" ");if(m[i]>1||m[0][S]()+u[S]()!=f)return e[l];var g=t[a]("tabSize"),y=e.countColumn(v,s,g)/g,b="";for(var w=0;w<y;w++)b+="	";t[E](u.trim()+" \n"+b+n[f][x]()),t.setCursor({line:p[h][r],ch:p[h].ch+2})}},d=u.substring(u[i]-1);f(d[x](),u),d[S]()!=d[x]()&&f(d[S](),u)}}var n="getRange",r="line",i="length",s=null,o="getLine",u="autoCloseBrackets",a="getOption",f="disableInput",l="Pass",c="listSelections",h="head",p="'",d="surround",v="skipThree",m="skip",g="addFour",y="both",b="execCommand",w="goCharRight",E="replaceSelection",S="toUpperCase",x="toLowerCase",L="()[]''\"\"",A=t.getAutoCloseTag(),O=/\s/,M=e.Pos;e.defineOption(u,!1,function(t,n,r){r!=e.Init&&r&&t.removeKeyMap(u);if(!n)return;var i=L,s=C(i);k(s,A),t.addKeyMap(s)})}),define("easyAlgoRunner",["easyAlgoConfiguration","easyAlgoContext","easyAlgoRuntimeException"],function(e,t,n){var r="number",i="boolean",s="length",o="proccessingChild",u="varname",a="offset",f="runChildBlock",l="currentLine",c="type",h="name",p="registerEndFunction",d="onEndFunction",v="commandName",m="array",g="setValue",y="L'entrée doit être de type ",b="runNextLine",w="haveFatalError",E="string",S="blockEnd",x=" doit être du type ",T="lineProcessor",N="function",C="expression",k="La variable ",L="indexs",A="fatalError",O="haveARunningChild",M="lines",_="context",D="info",P="endOfLineHandler",H="defineFunction",B="parameters",j="returnedValue",F="params",I="defineVar",q=function(e){this[j]=e},R={};return R.run=function(R,ot,ut,at){console.log(R);var ft=e.getFunctions(),lt=e.getSkipedFunction(),ct=0,ht=function(e,t,n,r){this[_]=e,this[M]=t,this.parent=n,this[T]=r,this[l]=0,this[d]=[],this[A]=!1,this[o]=undefined,this.id=ct++};ht.prototype={registerEndFunction:function(e){this[d].push(e)},blockEnd:function(e){for(var t=this[d][s]-1;t>=0;t--){var n=this[d][t](e);if(n===!1)break}},runLine:function(e,t){var n=this;try{this[T].runLine(e,this[_],this,function(){t&&t(),n[b]()})}catch(r){r instanceof q?t(r):(this[w](),ot.error(r),console.log(r))}},haveFatalError:function(){this[A]=!0,this.getParent()&&this.getParent()[w]()},runNextLine:function(){if(this[A])return;this[M][s]==0&&this[P]();if(this[l]<this[M][s]){var e=this,t=this[l]+1;this.runLine(this[M][this[l]++],function(t){e[P](t)})}},haveARunningChild:function(){return this[o]!=undefined},endOfLineHandler:function(e){if(e){this[S](e);return}if(this[l]>=this[M][s])if(!this[O]())this[S]();else{var t=this;this[o][p](function(){t[S]()})}},runChildBlock:function(e,n,r){var i=r!=undefined,u=r||new t(this[_]),a=new ht(u,e,this,this[T]);this[o]=a;var f=this,c=function(e){if(e&&!i){f[S](e);return}f[o]=undefined;try{n(e?e[j]:undefined)}catch(t){if(t instanceof q){f[S](t);return}throw t}i||f[O]()!==!0&&f[l]<f[M][s]&&f[b]()};a[p](c),setTimeout(function(){try{a[b]()}catch(e){e instanceof q&&c(e),f[w](),ot.error(e),console.log(e)}},0)},getParent:function(){return this.parent}};var pt=undefined,dt={number:"Nombre","boolean":"Booleen",string:"Chaine",array:"Tableau"},vt=function(e,t,r){if(Array.isArray(t)){var i=[];for(var s in t){i.push(dt[t[s]]);try{if(vt(e,t[s],r))return!0}catch(o){}}throw new n(e+x+i.join(" ou "),r)}if(typeof e==t||t==m&&angular.isArray(e))return!0;throw new n(e+x+(dt[t]||t),r)},mt=function(e,t,n,s){switch(n){case"+":if(typeof e==E||typeof t==E)e=bt(e),t=bt(t);return e+t;case"-":return vt(e,r,s),vt(t,r,s),e-t;case"*":return vt(e,r,s),vt(t,r,s),e*t;case"/":return vt(e,r,s),vt(t,r,s),e/t;case"mod":case"%":return vt(e,r,s),vt(t,r,s),e%t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t;case"==":return e==t;case"<>":case"!=":return e!=t;case"&&":return vt(e,i,s),vt(t,i,s),e&&t;case"||":return vt(e,i,s),vt(t,i,s),e||t;default:return undefined}},gt=function(e,t,n){if(e==undefined||e[s]==0){n();return}var r=e[s],i=-1,o=function(){++i;if(i<r){var s=e[i];t(o,s,i)}else n&&n()};o()},yt=function(e,o,l,p){if(e==undefined){p();return}if(typeof e==E||typeof e==r||typeof e==i){p(e);return}if(e.operation||e[c]=="comparaison"||e[c]==i){yt(e.left,o,l,function(t){yt(e.right,o,l,function(n){var r=mt(t,n,e.operation,e[a]);p(r)})});return}if(e[c]=="var"){o.isset(e[h],!0,e[a]);var d=o.getValue(e[h]);if(e[L]!=undefined&&e[L][s]>0){var v=[];gt(e[L],function(t,r){if(r=="ADD_AT_END")throw new n("Vous devez préciser l'indice de l'element à accéder.",e[a]);yt(r,o,l,function(n){v.push(n),vt(d,[m,E],e[a]),d=d[n],d==undefined&&ot[D](k+e[h]+"["+v.join("][")+"] n'est pas initialisée"),t()})},function(){p(d)});return}d==undefined&&ot[D](k+e[h]+" n'est pas initialisée"),p(d);return}if(e[c]==N){o.issetFunction(e[h],!0,e[a]);var y=o.getFunction(e[h]);if(typeof y==N){var b=[];gt(e[F],function(e,t){yt(t,o,l,function(t){b.push(t),e()})},function(){var e=y.apply(undefined,b);p(e)});return}if(typeof y=="object"){var w=new t(l[_],e[h]);if(y[B][s]!=e[F][s])throw new n("Le nombre de paramétre n'est pas correcte, la fonction "+espression[h]+" prend "+e[F][s]+" paramètre(s)",e[a]);gt(y[B],function(t,n,r){w[I](n[u],n.vartype),yt(e[F][r],o,l,function(e){w[g](n[u],e),t()})},function(){l[f](y.body,function(e){p(e)},w)});return}throw new n("La fonction "+e[h]+" n'existe pas",e[a])}if(e[c]==m){var S=[];gt(e.elements,function(e,t){yt(t[C],o,l,function(n){t[h]!=undefined?S[t[h]]=n:S.push(n),e()})},function(){p(S)})}},bt=function(e){if(e==undefined)return"NON_INITIALISEE";if(Array.isArray(e)){var t="[";for(var n in e)t+=" ",isNaN(n)&&(t+=n+" : "),t+=bt(e[n])+",";return t.substring(0,t[s]-1)+" ]"}return e},wt=function(e,t,n,o){if(e[v]=="write")return yt(e[F][0],t,n,function(t){var n=bt(t);e.output&&e.output=="error"?ot.error(n):e.output&&e.output==D?ot[D](n):ot.write(n),o&&o()}),!1;if(e[v]=="define")t[I](e[u],e.vartype);else{if(e[v]=="affectation")return t.isset(e[u][h],!0,e[a]),yt(e[C],t,n,function(r){e[u][L]==undefined&&vt(r,t.getType(e[u][h]),e[C][a]||e[a]);var i=[];gt(e[u][L],function(e,r){yt(r,t,n,function(t){i.push(t),e()})},function(){t[g](e[u][h],r,i[s]==0?undefined:i),o&&o()})}),!1;if(e[v]=="read"){t.isset(e[u][h],!0,e[a]);var f=t.getType(e[u][h]);return f==m&&ot[D]('Un tableau est une suite de valeurs séparée par des ";", par exemple 1;2;Bonjour;5'),ut.read(function(e){var t=dt[f]||f;switch(f){case r:if(isNaN(e))return ot[D](y+t+". Entrez une nouvelle valeur"),!1;break;case i:if(e!="1"&&e!="0"&&e!="vrai"&&e!="faux")return ot[D](y+t+". Entrez une nouvelle valeur (1, 0, vrai, faux)"),!1}return!0},function(n){var n=n;f==r?n=parseInt(n,10):f==i?n=n=="1"||n=="vrai":f==m&&(n=n.split(";")),t[g](e[u][h],n),o&&o()}),!1}if(e[v]=="return")return yt(e[C],t,n,function(e){throw new q(e)}),!1}return!0},Et={runLine:function(e,t,n,r){var o=!0;if(e[c]&&e[c]=="command")o=wt(e,t,n,r);else if(e[c]&&e[c]=="condition")yt(e.test,t,n,function(t){vt(t,i,e[a]),t&&e.yes&&e.yes[s]>0?n[f](e.yes,r):e.no&&e.no[s]>0?n[f](e.no,r):r&&r()}),o=!1;else if(e[c]&&e[c]=="for")t.isset(e[u],!0,e[a]),yt(e.step,t,n,function(i){var s=i===undefined?1:i;yt(e.start,t,n,function(i){var o=i-s;yt(e.end,t,n,function(i){t[g](e[u],o);var a=function(){o+=s,o<=i?(t[g](e[u],o),n[f](e.block,a)):r&&r()};a()})})}),o=!1;else if(e[c]&&e[c]=="forEach"){var l=e[u],p=(l+"_index").toUpperCase();t.isset(l,!0,e[a]),t[I](p,"NOMBRE"),yt(e[m],t,n,function(i){var o=[];for(var u in i)o.push(u);var a=o[s],u=-1,c=function(){u++;if(u<a){var s=o[u],h=i[s];t[g](p,s),t[g](l,h),n[f](e.block,c)}else r&&r()};c()}),o=!1}else if(e[c]&&e[c]=="while"){var d=e.test,v=e.block,y=function(){yt(d,t,n,function(e){e===!0?n[f](v,y):r&&r()})};y(),o=!1}else e[c]&&e[c]==N?(yt(e,t,n,function(){r&&r()}),o=!1):e[c]&&e[c]==H&&t[H](e[h],e[B],e.body);o&&r&&r()}},St=new t,xt=new ht(St,R,undefined,Et);xt[p](at),setTimeout(function(){xt[b]()},0)},R}),define("controllers/easyAlgoEditor",["app","easyAlgoParser","services/fileSystem","services/templatePreloader","controllers/popUp","controllers/editorInstructionPopUp","codemirror/mode/htmlmixed/htmlmixed","codemirror/addon/hint/show-hint","codemirror/addon/lint/lint","codemirror/addon/fold/foldgutter","easyAlgoSyntaxHighlighter","easyAlgoParser","easyAlgoLint","easyAlgoFold","easyAlgoValidator","easyAlgoCloseTag","easyAlgoRunner","services/fileSystem"],function(app,Parser,fs){var EDITOR_OPTIONS={lineNumbers:!0,tabSize:2,mode:"text/easyAlgo-src",gutters:["CodeMirror-lint-markers","CodeMirror-linenumbers","CodeMirror-foldgutter"],extraKeys:{"Ctrl-Space":"autocomplete"},lint:{async:!0},foldGutter:!0,autoCloseBrackets:!0},terminalWritter={init:function(e,t){this.$scope=e,this.$timeout=t},setCodeMirror:function(e){this.cm=e},abstractWrite:function(e,t){Array.isArray(e)||(e=[e+""]),t=t||"info";var n=this;this.$scope.$broadcast("terminal-output",{output:!0,text:e,breakLine:!1,className:t})},write:function(e){this.abstractWrite(e,"output")},error:function(e){typeof e=="object"&&(e=e.toString(this.cm)),this.abstractWrite(e,"error")},info:function(e){this.abstractWrite(e,"info")}},terminalReader={init:function(e){var t="onCommandInput";this.$scope=e,this[t]=undefined;var n=this;e.$on("terminal-input",function(e,r){var i=r[0];if(n[t]){var o=n[t];n[t]=undefined,o(i.command)}})},setHandler:function(e){this.onCommandInput=e},read:function(e,t){var n="setHandler",r=this;r.$scope.$apply();var i=function(o){!e||e(o)?t(o):r[n](i)};this[n](i)}},toFileName=function(e){return e.replace(/[^a-z0-9\(\)\-]/gi,"_").toLowerCase()};app.controller("easyAlgoEditor",["$scope","$modal","$timeout","$injector","templatePreloader","popUpManager",function($scope,$modal,$timeout,$injector,templatePreloader,popUpManager){terminalWritter.init($scope,$timeout),terminalReader.init($scope),$scope.editorConfiguration=function(e){if(e.options)return e.options;var t={};return angular.copy(EDITOR_OPTIONS,t),t.onLoad=function(t){e.cm=t,t.on("change",function(t,n){$scope.fsSupported&&n.origin!="setValue"&&(e.isSaved=!1,$scope.$apply())})},angular.extend(t.extraKeys,{"Ctrl-S":function(t){$scope.saveAlgo(e)}}),e.options=t,t},$scope.tabs=[],$scope.renamed=function(e){e.renameMode=!1,$scope.fsSupported&&e.filePath&&$scope.renameAlgo(e)},$scope.addTab=function(){var e={title:"Algo "+($scope.tabs.length+1),content:"// Algo n°"+($scope.tabs.length+1),active:!0,renameMode:!0,isSaved:!0};return $scope.tabs.push(e),e},$scope.removeTab=function(e){var t=$scope.tabs[e];popUpManager.confirm("Suppression de l'onglet : "+t.title,"Voulez vous vraiment supprimer l'onglet "+t.title+" ?",function(){$scope.tabs.splice(e,1),$scope.fsSupported&&t.filePath&&fs.removeFile(t.filePath)})},$scope.currentTab=function(){return $scope.tabs.filter(function(e){return e.active})[0]},$scope.clearConsole=function(){$timeout(function(){var e=angular.element(document.getElementById("terminal")).scope();e.clear()})},$scope.runAlgo=function(){var e="errors",t=$scope.currentTab(),n=t.content;terminalWritter.setCodeMirror(t.cm),terminalWritter.info("Complilation de l'algorithme : "+t.title);var r=undefined;try{var i=new Parser;result=i.parse(n);if(result[e]&&result[e].length>0){terminalWritter.error("L'algorithme comporte des erreurs!");for(var s in result[e]){var o=result[e][s],u=t.cm.posFromIndex(o.getStart());terminalWritter.error(o+" (ligne : "+(u.line+1)+", colonne : "+u.ch+")")}return}r=result.result}catch(a){terminalWritter.error(["Une erreur est survenue : ",a.toString()]);return}terminalWritter.info("Execution de l'algorithme : "+t.title);var f=require("easyAlgoRunner");f.run(r,terminalWritter,terminalReader,function(){terminalWritter.info("Fin de l'algorithme")})},$scope.downloadAlgo=function(){var e=$scope.currentTab(),t=e.content,n=new Blob([t],{type:"text/plain"});$scope.downloadAlgoUrl=(window.URL||window.webkitURL).createObjectURL(n),$scope.downloadAlgoFileName=toFileName(e.title)},$scope.fileAdded=function(e,t,n){var r="lastIndexOf",i=e.name.substring(e.name[r](".")+1),s="easyAlgo";if(i!=s){popUpManager.warning("Erreur lors de l'ajout de l'algorithme","L'extension du fichier doit être ."+s);return}var o=new FileReader;o.readAsText(e.file),o.onload=function(t){var i=$scope.addTab();i.content=t.target.result,i.title=e.name.substring(0,e.name[r](".")),i.renameMode=!1,n.removeFile(e),$scope.$apply()}};var errorFsHandler=function(){var e=$scope.addTab();e.renameMode=!1,$scope.$apply()};$scope.initAlgos=function(){fs.listDir("algos",function(dirContent){var added=!1,todo=dirContent.length;todo==0&&errorFsHandler();for(var i in dirContent)(function(index,entryFile){fs.readFileEntry(entryFile,function(content){try{var tab={};JSON&&JSON.parse?tab=JSON.parse(content):tab=eval("("+content+")"),tab.renameMode=!1,tab.active=!0,tab.filePath=entryFile.fullPath.slice(1),$scope.tabs.push(tab),$scope.$apply(),added=!0,todo--}catch(e){}todo==0&&!added&&errorFsHandler()})})(i,dirContent[i])},errorFsHandler)},$scope.renameAlgo=function(e){var t="filePath";e[t]?fs.removeFile(e[t],function(){e[t]=undefined,$scope.saveAlgo(e)}):$scope.saveAlgo(e)},$scope.saveAlgo=function(e){var t=e||$scope.currentTab(),n=t.filePath||"algos/"+toFileName(t.title),r=function(){var e={title:t.title,content:t.content};t.filePath=n,t.isSaved=!0,$scope.$apply(),fs.writeFile(n,JSON.stringify(e))};fs.touch(n,r,function(e){(e.name="InvalidModificationError")&&r()})},templatePreloader("editorInstructionPopUp.html"),$scope.openInstructionPopUp=function(){$modal.open({templateUrl:"editorInstructionPopUp.html",controller:"editorInstructionPopUp",size:"lg",resolve:{codeMirror:function(){return $scope.currentTab().cm}}})},$scope.chart={options:{},data:[{value:300,color:"#F7464A",highlight:"#FF5A5E",label:"Red"},{value:50,color:"#46BFBD",highlight:"#5AD3D1",label:"Green"},{value:100,color:"#FDB45C",highlight:"#FFC870",label:"Yellow"}],type:"doughnut"},$scope.fsSupported=!1,fs.isSupported()&&fs.initFs(5242880,function(){fs.mkdir("algos",function(e){$scope.fsSupported=!0,$scope.$apply(),$scope.initAlgos()})},errorFsHandler),$scope.resize=function(){var e="getElementById",t="offsetHeight",n=document[e]("editorPane"),r=document[e]("terminal"),i=window.innerHeight,s=angular.element(document.querySelector(".navbar"))[0];console.log(n[t]),r.style.height=i-s[t]-n[t]-20+"px",r.style.padding=0},$scope.resizeEditor=function(e){var t="getElementById",n="querySelector",r="offsetHeight",i=document[t]("button-list"),s=document[t]("editorPane"),o=document[t]("terminal"),u=window.innerHeight,a=angular.element(document[n](".nav.nav-tabs"))[0],f=angular.element(document[n](".navbar"))[0],l=u-20-f[r]-i[r]-a[r]+"px";o.style.height=0,o.style.padding=0,e.setSize(undefined,l)}}]).service("promptCreator",[function(){var e=function(e){return{text:""}};return e}])});