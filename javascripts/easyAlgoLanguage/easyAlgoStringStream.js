define([],function(){var e="pos",t="start",n="string",r="tabSize",i="lastColumnPos",s="lastColumnValue",o="lineStart",u="length",a="charAt",f=!0,l=!1,c="slice",h=function(u,a){this[e]=this[t]=0,this[n]=u,this[r]=a||8,this[i]=this[s]=0,this[o]=0};return h.prototype={eol:function(){return this[e]>=this[n][u]},sol:function(){return this[e]==this[o]},peek:function(){return this[n][a](this[e])||undefined},next:function(){if(this[e]<this[n][u])return this[n][a](this[e]++)},eat:function(t){var r=this[n][a](this[e]);if(typeof t==n)var i=r==t;else var i=r&&(t.test?t.test(r):t(r));if(i)return++this[e],r},eatEndOfLine:function(e){return this.eat("\r"),this.eat("\n")},eatWhile:function(t){var n=this[e];while(this.eat(t));return this[e]>n},eatSpace:function(){var t=this[e];while(/[\s\u00a0]/.test(this[n][a](this[e])))++this[e];return this[e]>t},skipToEnd:function(){this[e]=this[n][u]},skipTo:function(t){var r=this[n].indexOf(t,this[e]);if(r>-1)return this[e]=r,f},backUp:function(t){this[e]-=t},column:function(){return this[i]<this[t]&&(this[s]=countColumn(this[n],this[t],this[r],this[i],this[s]),this[i]=this[t]),this[s]-(this[o]?countColumn(this[n],this[o],this[r]):0)},indentation:function(){return countColumn(this[n],null,this[r])-(this[o]?countColumn(this[n],this[o],this[r]):0)},match:function(t,r,i){if(typeof t!=n){var a=this[n][c](this[e]).match(t);return a&&a.index>0?null:(a&&r!==l&&(this[e]+=a[0][u]),a)}var s=function(e){return i?e.toLowerCase():e},o=this[n].substr(this[e],t[u]);if(s(o)==s(t))return r!==l&&(this[e]+=t[u]),f},current:function(){return this[n][c](this[t],this[e])},hideFirstChars:function(e,t){this[o]+=e;try{return t()}finally{this[o]-=e}},eatTo:function(t,r){var i=this[e];return this.skipTo(t)?r===undefined||r===f?this[n][c](i,this[e]):f:l},textBetween:function(e,t){return this[n][c](e,t)},eatWord:function(t){var n=this[e];if(!this.eatWhile(/[\w\$_]/))return l;var r=this.textBetween(n,this[e]);return t?r.toUpperCase():r}},h});